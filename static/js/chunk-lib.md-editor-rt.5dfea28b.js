"use strict";(self.webpackChunkndzy_app=self.webpackChunkndzy_app||[]).push([[1256],{7933:(e,t,o)=>{o.d(t,{C:()=>Rt,E:()=>Ut,a:()=>Bt,b:()=>Oe,u:()=>Ie});var n=o(4901),i=o(9950),l=o(9669),a=o(1741),s=o(4772),r=o(4219),c=o(7629),d=o(5476),h=o(1289),u=o(6318),m=o(2850),p=o(4488),f=o(9516),g=o(5931),v=o(5125),b=o(7243),A=o(8336),x=o(8041),w=o(9646),j=o(8319),k=o(9790),y=o(5149),C=o(4558),T=o(6562),S=o(8458),E=o(4705);const _="object"===typeof performance&&performance&&"function"===typeof performance.now?performance:Date,N=new Set,M="object"===typeof process&&process?process:{},F=(e,t,o,n)=>{"function"===typeof M.emitWarning?M.emitWarning(e,t,o,n):console.error("[".concat(o,"] ").concat(t,": ").concat(e))};let I=globalThis.AbortController,L=globalThis.AbortSignal;if("undefined"===typeof I){var O;L=class{constructor(){(0,E.A)(this,"onabort",void 0),(0,E.A)(this,"_onabort",[]),(0,E.A)(this,"reason",void 0),(0,E.A)(this,"aborted",!1)}addEventListener(e,t){this._onabort.push(t)}},I=class{constructor(){(0,E.A)(this,"signal",new L),t()}abort(e){var t,o;if(!this.signal.aborted){this.signal.reason=e,this.signal.aborted=!0;for(const t of this.signal._onabort)t(e);null===(t=(o=this.signal).onabort)||void 0===t||t.call(o,e)}}};let e="1"!==(null===(O=M.env)||void 0===O?void 0:O.LRU_CACHE_IGNORE_AC_WARNING);const t=()=>{e&&(e=!1,F("AbortController is not defined. If using lru-cache in node 14, load an AbortController polyfill from the `node-abort-controller` package. A minimal polyfill is provided for use by LRUCache.fetch(), but it should not be relied upon in other contexts (eg, passing it to other APIs that use AbortController/AbortSignal might have undesirable effects). You may disable this with LRU_CACHE_IGNORE_AC_WARNING=1 in the env.","NO_ABORT_CONTROLLER","ENOTSUP",t))}}Symbol("type");const R=e=>e&&e===Math.floor(e)&&e>0&&isFinite(e),H=e=>R(e)?e<=Math.pow(2,8)?Uint8Array:e<=Math.pow(2,16)?Uint16Array:e<=Math.pow(2,32)?Uint32Array:e<=Number.MAX_SAFE_INTEGER?W:null:null;class W extends Array{constructor(e){super(e),this.fill(0)}}class z{static create(e){const t=H(e);if(!t)return[];D._=!0;const o=new z(e,t);return D._=!1,o}constructor(e,t){if((0,E.A)(this,"heap",void 0),(0,E.A)(this,"length",void 0),!D._)throw new TypeError("instantiate Stack using Stack.create(n)");this.heap=new t(e),this.length=0}push(e){this.heap[this.length++]=e}pop(){return this.heap[--this.length]}}var D={_:!1},P=new WeakMap,V=new WeakMap,B=new WeakMap,U=new WeakMap,$=new WeakMap,G=new WeakMap,q=new WeakMap,K=new WeakMap,Y=new WeakMap,Z=new WeakMap,X=new WeakMap,J=new WeakMap,Q=new WeakMap,ee=new WeakMap,te=new WeakMap,oe=new WeakMap,ne=new WeakMap,ie=new WeakMap,le=new WeakMap,ae=new WeakMap,se=new WeakMap,re=new WeakMap,ce=new WeakSet,de=new WeakMap,he=new WeakMap,ue=new WeakMap,me=new WeakMap,pe=new WeakMap,fe=new WeakMap,ge=new WeakMap;class ve{static unsafeExposeInternals(e){return{starts:(0,S.A)(ie,e),ttls:(0,S.A)(le,e),sizes:(0,S.A)(ne,e),keyMap:(0,S.A)(K,e),keyList:(0,S.A)(Y,e),valList:(0,S.A)(Z,e),next:(0,S.A)(X,e),prev:(0,S.A)(J,e),get head(){return(0,S.A)(Q,e)},get tail(){return(0,S.A)(ee,e)},free:(0,S.A)(te,e),isBackgroundFetch:t=>(0,T.A)(ce,e,Ce).call(e,t),backgroundFetch:(t,o,n,i)=>(0,T.A)(ce,e,ye).call(e,t,o,n,i),moveToTail:t=>(0,T.A)(ce,e,Se).call(e,t),indexes:t=>(0,T.A)(ce,e,xe).call(e,t),rindexes:t=>(0,T.A)(ce,e,we).call(e,t),isStale:t=>(0,S.A)(me,e).call(e,t)}}get max(){return(0,S.A)(P,this)}get maxSize(){return(0,S.A)(V,this)}get calculatedSize(){return(0,S.A)(q,this)}get size(){return(0,S.A)(G,this)}get fetchMethod(){return(0,S.A)($,this)}get dispose(){return(0,S.A)(B,this)}get disposeAfter(){return(0,S.A)(U,this)}constructor(e){(0,k.A)(this,ce),(0,y.A)(this,P,void 0),(0,y.A)(this,V,void 0),(0,y.A)(this,B,void 0),(0,y.A)(this,U,void 0),(0,y.A)(this,$,void 0),(0,E.A)(this,"ttl",void 0),(0,E.A)(this,"ttlResolution",void 0),(0,E.A)(this,"ttlAutopurge",void 0),(0,E.A)(this,"updateAgeOnGet",void 0),(0,E.A)(this,"updateAgeOnHas",void 0),(0,E.A)(this,"allowStale",void 0),(0,E.A)(this,"noDisposeOnSet",void 0),(0,E.A)(this,"noUpdateTTL",void 0),(0,E.A)(this,"maxEntrySize",void 0),(0,E.A)(this,"sizeCalculation",void 0),(0,E.A)(this,"noDeleteOnFetchRejection",void 0),(0,E.A)(this,"noDeleteOnStaleGet",void 0),(0,E.A)(this,"allowStaleOnFetchAbort",void 0),(0,E.A)(this,"allowStaleOnFetchRejection",void 0),(0,E.A)(this,"ignoreFetchAbort",void 0),(0,y.A)(this,G,void 0),(0,y.A)(this,q,void 0),(0,y.A)(this,K,void 0),(0,y.A)(this,Y,void 0),(0,y.A)(this,Z,void 0),(0,y.A)(this,X,void 0),(0,y.A)(this,J,void 0),(0,y.A)(this,Q,void 0),(0,y.A)(this,ee,void 0),(0,y.A)(this,te,void 0),(0,y.A)(this,oe,void 0),(0,y.A)(this,ne,void 0),(0,y.A)(this,ie,void 0),(0,y.A)(this,le,void 0),(0,y.A)(this,ae,void 0),(0,y.A)(this,se,void 0),(0,y.A)(this,re,void 0),(0,y.A)(this,de,(()=>{})),(0,y.A)(this,he,(()=>{})),(0,y.A)(this,ue,(()=>{})),(0,y.A)(this,me,(()=>!1)),(0,y.A)(this,pe,(e=>{})),(0,y.A)(this,fe,((e,t,o)=>{})),(0,y.A)(this,ge,((e,t,o,n)=>{if(o||n)throw new TypeError("cannot set size without setting maxSize or maxEntrySize on cache");return 0})),(0,E.A)(this,Symbol.toStringTag,"LRUCache");const{max:t=0,ttl:o,ttlResolution:n=1,ttlAutopurge:i,updateAgeOnGet:l,updateAgeOnHas:a,allowStale:s,dispose:r,disposeAfter:c,noDisposeOnSet:d,noUpdateTTL:h,maxSize:u=0,maxEntrySize:m=0,sizeCalculation:p,fetchMethod:f,noDeleteOnFetchRejection:g,noDeleteOnStaleGet:v,allowStaleOnFetchRejection:b,allowStaleOnFetchAbort:A,ignoreFetchAbort:x}=e;if(0!==t&&!R(t))throw new TypeError("max option must be a nonnegative integer");const w=t?H(t):Array;if(!w)throw new Error("invalid max value: "+t);if((0,C.A)(P,this,t),(0,C.A)(V,this,u),this.maxEntrySize=m||(0,S.A)(V,this),this.sizeCalculation=p,this.sizeCalculation){if(!(0,S.A)(V,this)&&!this.maxEntrySize)throw new TypeError("cannot set sizeCalculation without setting maxSize or maxEntrySize");if("function"!==typeof this.sizeCalculation)throw new TypeError("sizeCalculation set to non-function")}if(void 0!==f&&"function"!==typeof f)throw new TypeError("fetchMethod must be a function if specified");if((0,C.A)($,this,f),(0,C.A)(se,this,!!f),(0,C.A)(K,this,new Map),(0,C.A)(Y,this,new Array(t).fill(void 0)),(0,C.A)(Z,this,new Array(t).fill(void 0)),(0,C.A)(X,this,new w(t)),(0,C.A)(J,this,new w(t)),(0,C.A)(Q,this,0),(0,C.A)(ee,this,0),(0,C.A)(te,this,z.create(t)),(0,C.A)(G,this,0),(0,C.A)(q,this,0),"function"===typeof r&&(0,C.A)(B,this,r),"function"===typeof c?((0,C.A)(U,this,c),(0,C.A)(oe,this,[])):((0,C.A)(U,this,void 0),(0,C.A)(oe,this,void 0)),(0,C.A)(ae,this,!!(0,S.A)(B,this)),(0,C.A)(re,this,!!(0,S.A)(U,this)),this.noDisposeOnSet=!!d,this.noUpdateTTL=!!h,this.noDeleteOnFetchRejection=!!g,this.allowStaleOnFetchRejection=!!b,this.allowStaleOnFetchAbort=!!A,this.ignoreFetchAbort=!!x,0!==this.maxEntrySize){if(0!==(0,S.A)(V,this)&&!R((0,S.A)(V,this)))throw new TypeError("maxSize must be a positive integer if specified");if(!R(this.maxEntrySize))throw new TypeError("maxEntrySize must be a positive integer if specified");(0,T.A)(ce,this,Ae).call(this)}if(this.allowStale=!!s,this.noDeleteOnStaleGet=!!v,this.updateAgeOnGet=!!l,this.updateAgeOnHas=!!a,this.ttlResolution=R(n)||0===n?n:1,this.ttlAutopurge=!!i,this.ttl=o||0,this.ttl){if(!R(this.ttl))throw new TypeError("ttl must be a positive integer if specified");(0,T.A)(ce,this,be).call(this)}if(0===(0,S.A)(P,this)&&0===this.ttl&&0===(0,S.A)(V,this))throw new TypeError("At least one of max, maxSize, or ttl is required");if(!this.ttlAutopurge&&!(0,S.A)(P,this)&&!(0,S.A)(V,this)){const e="LRU_CACHE_UNBOUNDED";if((e=>!N.has(e))(e)){N.add(e);F("TTL caching without ttlAutopurge, max, or maxSize can result in unbounded memory consumption.","UnboundedCacheWarning",e,ve)}}}getRemainingTTL(e){return(0,S.A)(K,this).has(e)?1/0:0}*entries(){for(const e of(0,T.A)(ce,this,xe).call(this))void 0===(0,S.A)(Z,this)[e]||void 0===(0,S.A)(Y,this)[e]||(0,T.A)(ce,this,Ce).call(this,(0,S.A)(Z,this)[e])||(yield[(0,S.A)(Y,this)[e],(0,S.A)(Z,this)[e]])}*rentries(){for(const e of(0,T.A)(ce,this,we).call(this))void 0===(0,S.A)(Z,this)[e]||void 0===(0,S.A)(Y,this)[e]||(0,T.A)(ce,this,Ce).call(this,(0,S.A)(Z,this)[e])||(yield[(0,S.A)(Y,this)[e],(0,S.A)(Z,this)[e]])}*keys(){for(const e of(0,T.A)(ce,this,xe).call(this)){const t=(0,S.A)(Y,this)[e];void 0===t||(0,T.A)(ce,this,Ce).call(this,(0,S.A)(Z,this)[e])||(yield t)}}*rkeys(){for(const e of(0,T.A)(ce,this,we).call(this)){const t=(0,S.A)(Y,this)[e];void 0===t||(0,T.A)(ce,this,Ce).call(this,(0,S.A)(Z,this)[e])||(yield t)}}*values(){for(const e of(0,T.A)(ce,this,xe).call(this)){void 0===(0,S.A)(Z,this)[e]||(0,T.A)(ce,this,Ce).call(this,(0,S.A)(Z,this)[e])||(yield(0,S.A)(Z,this)[e])}}*rvalues(){for(const e of(0,T.A)(ce,this,we).call(this)){void 0===(0,S.A)(Z,this)[e]||(0,T.A)(ce,this,Ce).call(this,(0,S.A)(Z,this)[e])||(yield(0,S.A)(Z,this)[e])}}[Symbol.iterator](){return this.entries()}find(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};for(const o of(0,T.A)(ce,this,xe).call(this)){const n=(0,S.A)(Z,this)[o],i=(0,T.A)(ce,this,Ce).call(this,n)?n.__staleWhileFetching:n;if(void 0!==i&&e(i,(0,S.A)(Y,this)[o],this))return this.get((0,S.A)(Y,this)[o],t)}}forEach(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this;for(const o of(0,T.A)(ce,this,xe).call(this)){const n=(0,S.A)(Z,this)[o],i=(0,T.A)(ce,this,Ce).call(this,n)?n.__staleWhileFetching:n;void 0!==i&&e.call(t,i,(0,S.A)(Y,this)[o],this)}}rforEach(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this;for(const o of(0,T.A)(ce,this,we).call(this)){const n=(0,S.A)(Z,this)[o],i=(0,T.A)(ce,this,Ce).call(this,n)?n.__staleWhileFetching:n;void 0!==i&&e.call(t,i,(0,S.A)(Y,this)[o],this)}}purgeStale(){let e=!1;for(const t of(0,T.A)(ce,this,we).call(this,{allowStale:!0}))(0,S.A)(me,this).call(this,t)&&(this.delete((0,S.A)(Y,this)[t]),e=!0);return e}info(e){const t=(0,S.A)(K,this).get(e);if(void 0===t)return;const o=(0,S.A)(Z,this)[t],n=(0,T.A)(ce,this,Ce).call(this,o)?o.__staleWhileFetching:o;if(void 0===n)return;const i={value:n};if((0,S.A)(le,this)&&(0,S.A)(ie,this)){const e=(0,S.A)(le,this)[t],o=(0,S.A)(ie,this)[t];if(e&&o){const t=e-(_.now()-o);i.ttl=t,i.start=Date.now()}}return(0,S.A)(ne,this)&&(i.size=(0,S.A)(ne,this)[t]),i}dump(){const e=[];for(const t of(0,T.A)(ce,this,xe).call(this,{allowStale:!0})){const o=(0,S.A)(Y,this)[t],n=(0,S.A)(Z,this)[t],i=(0,T.A)(ce,this,Ce).call(this,n)?n.__staleWhileFetching:n;if(void 0===i||void 0===o)continue;const l={value:i};if((0,S.A)(le,this)&&(0,S.A)(ie,this)){l.ttl=(0,S.A)(le,this)[t];const e=_.now()-(0,S.A)(ie,this)[t];l.start=Math.floor(Date.now()-e)}(0,S.A)(ne,this)&&(l.size=(0,S.A)(ne,this)[t]),e.unshift([o,l])}return e}load(e){this.clear();for(const[t,o]of e){if(o.start){const e=Date.now()-o.start;o.start=_.now()-e}this.set(t,o.value,o)}}set(e,t){let o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(void 0===t)return this.delete(e),this;const{ttl:n=this.ttl,start:i,noDisposeOnSet:l=this.noDisposeOnSet,sizeCalculation:a=this.sizeCalculation,status:s}=o;let{noUpdateTTL:r=this.noUpdateTTL}=o;const c=(0,S.A)(ge,this).call(this,e,t,o.size||0,a);if(this.maxEntrySize&&c>this.maxEntrySize)return s&&(s.set="miss",s.maxEntrySizeExceeded=!0),this.delete(e),this;let d=0===(0,S.A)(G,this)?void 0:(0,S.A)(K,this).get(e);if(void 0===d){var h;d=0===(0,S.A)(G,this)?(0,S.A)(ee,this):0!==(0,S.A)(te,this).length?(0,S.A)(te,this).pop():(0,S.A)(G,this)===(0,S.A)(P,this)?(0,T.A)(ce,this,ke).call(this,!1):(0,S.A)(G,this),(0,S.A)(Y,this)[d]=e,(0,S.A)(Z,this)[d]=t,(0,S.A)(K,this).set(e,d),(0,S.A)(X,this)[(0,S.A)(ee,this)]=d,(0,S.A)(J,this)[d]=(0,S.A)(ee,this),(0,C.A)(ee,this,d),(0,C.A)(G,this,(h=(0,S.A)(G,this),h++,h)),(0,S.A)(fe,this).call(this,d,c,s),s&&(s.set="add"),r=!1}else{(0,T.A)(ce,this,Se).call(this,d);const o=(0,S.A)(Z,this)[d];if(t!==o){if((0,S.A)(se,this)&&(0,T.A)(ce,this,Ce).call(this,o)){o.__abortController.abort(new Error("replaced"));const{__staleWhileFetching:t}=o;if(void 0!==t&&!l){var u,m;if((0,S.A)(ae,this))null===(u=(0,S.A)(B,this))||void 0===u||u.call(this,t,e,"set");if((0,S.A)(re,this))null===(m=(0,S.A)(oe,this))||void 0===m||m.push([t,e,"set"])}}else if(!l){var p,f;if((0,S.A)(ae,this))null===(p=(0,S.A)(B,this))||void 0===p||p.call(this,o,e,"set");if((0,S.A)(re,this))null===(f=(0,S.A)(oe,this))||void 0===f||f.push([o,e,"set"])}if((0,S.A)(pe,this).call(this,d),(0,S.A)(fe,this).call(this,d,c,s),(0,S.A)(Z,this)[d]=t,s){s.set="replace";const e=o&&(0,T.A)(ce,this,Ce).call(this,o)?o.__staleWhileFetching:o;void 0!==e&&(s.oldValue=e)}}else s&&(s.set="update")}if(0===n||(0,S.A)(le,this)||(0,T.A)(ce,this,be).call(this),(0,S.A)(le,this)&&(r||(0,S.A)(ue,this).call(this,d,n,i),s&&(0,S.A)(he,this).call(this,s,d)),!l&&(0,S.A)(re,this)&&(0,S.A)(oe,this)){const e=(0,S.A)(oe,this);let t;for(;t=null===e||void 0===e?void 0:e.shift();){var g;null===(g=(0,S.A)(U,this))||void 0===g||g.call(this,...t)}}return this}pop(){try{for(;(0,S.A)(G,this);){const e=(0,S.A)(Z,this)[(0,S.A)(Q,this)];if((0,T.A)(ce,this,ke).call(this,!0),(0,T.A)(ce,this,Ce).call(this,e)){if(e.__staleWhileFetching)return e.__staleWhileFetching}else if(void 0!==e)return e}}finally{if((0,S.A)(re,this)&&(0,S.A)(oe,this)){const t=(0,S.A)(oe,this);let o;for(;o=null===t||void 0===t?void 0:t.shift();){var e;null===(e=(0,S.A)(U,this))||void 0===e||e.call(this,...o)}}}}has(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const{updateAgeOnHas:o=this.updateAgeOnHas,status:n}=t,i=(0,S.A)(K,this).get(e);if(void 0!==i){const e=(0,S.A)(Z,this)[i];if((0,T.A)(ce,this,Ce).call(this,e)&&void 0===e.__staleWhileFetching)return!1;if(!(0,S.A)(me,this).call(this,i))return o&&(0,S.A)(de,this).call(this,i),n&&(n.has="hit",(0,S.A)(he,this).call(this,n,i)),!0;n&&(n.has="stale",(0,S.A)(he,this).call(this,n,i))}else n&&(n.has="miss");return!1}peek(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const{allowStale:o=this.allowStale}=t,n=(0,S.A)(K,this).get(e);if(void 0===n||!o&&(0,S.A)(me,this).call(this,n))return;const i=(0,S.A)(Z,this)[n];return(0,T.A)(ce,this,Ce).call(this,i)?i.__staleWhileFetching:i}async fetch(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const{allowStale:o=this.allowStale,updateAgeOnGet:n=this.updateAgeOnGet,noDeleteOnStaleGet:i=this.noDeleteOnStaleGet,ttl:l=this.ttl,noDisposeOnSet:a=this.noDisposeOnSet,size:s=0,sizeCalculation:r=this.sizeCalculation,noUpdateTTL:c=this.noUpdateTTL,noDeleteOnFetchRejection:d=this.noDeleteOnFetchRejection,allowStaleOnFetchRejection:h=this.allowStaleOnFetchRejection,ignoreFetchAbort:u=this.ignoreFetchAbort,allowStaleOnFetchAbort:m=this.allowStaleOnFetchAbort,context:p,forceRefresh:f=!1,status:g,signal:v}=t;if(!(0,S.A)(se,this))return g&&(g.fetch="get"),this.get(e,{allowStale:o,updateAgeOnGet:n,noDeleteOnStaleGet:i,status:g});const b={allowStale:o,updateAgeOnGet:n,noDeleteOnStaleGet:i,ttl:l,noDisposeOnSet:a,size:s,sizeCalculation:r,noUpdateTTL:c,noDeleteOnFetchRejection:d,allowStaleOnFetchRejection:h,allowStaleOnFetchAbort:m,ignoreFetchAbort:u,status:g,signal:v};let A=(0,S.A)(K,this).get(e);if(void 0===A){g&&(g.fetch="miss");const t=(0,T.A)(ce,this,ye).call(this,e,A,b,p);return t.__returned=t}{const t=(0,S.A)(Z,this)[A];if((0,T.A)(ce,this,Ce).call(this,t)){const e=o&&void 0!==t.__staleWhileFetching;return g&&(g.fetch="inflight",e&&(g.returnedStale=!0)),e?t.__staleWhileFetching:t.__returned=t}const i=(0,S.A)(me,this).call(this,A);if(!f&&!i)return g&&(g.fetch="hit"),(0,T.A)(ce,this,Se).call(this,A),n&&(0,S.A)(de,this).call(this,A),g&&(0,S.A)(he,this).call(this,g,A),t;const l=(0,T.A)(ce,this,ye).call(this,e,A,b,p),a=void 0!==l.__staleWhileFetching&&o;return g&&(g.fetch=i?"stale":"refresh",a&&i&&(g.returnedStale=!0)),a?l.__staleWhileFetching:l.__returned=l}}get(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const{allowStale:o=this.allowStale,updateAgeOnGet:n=this.updateAgeOnGet,noDeleteOnStaleGet:i=this.noDeleteOnStaleGet,status:l}=t,a=(0,S.A)(K,this).get(e);if(void 0!==a){const t=(0,S.A)(Z,this)[a],s=(0,T.A)(ce,this,Ce).call(this,t);return l&&(0,S.A)(he,this).call(this,l,a),(0,S.A)(me,this).call(this,a)?(l&&(l.get="stale"),s?(l&&o&&void 0!==t.__staleWhileFetching&&(l.returnedStale=!0),o?t.__staleWhileFetching:void 0):(i||this.delete(e),l&&o&&(l.returnedStale=!0),o?t:void 0)):(l&&(l.get="hit"),s?t.__staleWhileFetching:((0,T.A)(ce,this,Se).call(this,a),n&&(0,S.A)(de,this).call(this,a),t))}l&&(l.get="miss")}delete(e){var t;let o=!1;if(0!==(0,S.A)(G,this)){const t=(0,S.A)(K,this).get(e);if(void 0!==t)if(o=!0,1===(0,S.A)(G,this))this.clear();else{var n;(0,S.A)(pe,this).call(this,t);const o=(0,S.A)(Z,this)[t];if((0,T.A)(ce,this,Ce).call(this,o))o.__abortController.abort(new Error("deleted"));else if((0,S.A)(ae,this)||(0,S.A)(re,this)){var i,l;if((0,S.A)(ae,this))null===(i=(0,S.A)(B,this))||void 0===i||i.call(this,o,e,"delete");if((0,S.A)(re,this))null===(l=(0,S.A)(oe,this))||void 0===l||l.push([o,e,"delete"])}if((0,S.A)(K,this).delete(e),(0,S.A)(Y,this)[t]=void 0,(0,S.A)(Z,this)[t]=void 0,t===(0,S.A)(ee,this))(0,C.A)(ee,this,(0,S.A)(J,this)[t]);else if(t===(0,S.A)(Q,this))(0,C.A)(Q,this,(0,S.A)(X,this)[t]);else{const e=(0,S.A)(J,this)[t];(0,S.A)(X,this)[e]=(0,S.A)(X,this)[t];const o=(0,S.A)(X,this)[t];(0,S.A)(J,this)[o]=(0,S.A)(J,this)[t]}(0,C.A)(G,this,(n=(0,S.A)(G,this),n--,n)),(0,S.A)(te,this).push(t)}}if((0,S.A)(re,this)&&null!==(t=(0,S.A)(oe,this))&&void 0!==t&&t.length){const e=(0,S.A)(oe,this);let t;for(;t=null===e||void 0===e?void 0:e.shift();){var a;null===(a=(0,S.A)(U,this))||void 0===a||a.call(this,...t)}}return o}clear(){for(const n of(0,T.A)(ce,this,we).call(this,{allowStale:!0})){const o=(0,S.A)(Z,this)[n];if((0,T.A)(ce,this,Ce).call(this,o))o.__abortController.abort(new Error("deleted"));else{const i=(0,S.A)(Y,this)[n];var e,t;if((0,S.A)(ae,this))null===(e=(0,S.A)(B,this))||void 0===e||e.call(this,o,i,"delete");if((0,S.A)(re,this))null===(t=(0,S.A)(oe,this))||void 0===t||t.push([o,i,"delete"])}}if((0,S.A)(K,this).clear(),(0,S.A)(Z,this).fill(void 0),(0,S.A)(Y,this).fill(void 0),(0,S.A)(le,this)&&(0,S.A)(ie,this)&&((0,S.A)(le,this).fill(0),(0,S.A)(ie,this).fill(0)),(0,S.A)(ne,this)&&(0,S.A)(ne,this).fill(0),(0,C.A)(Q,this,0),(0,C.A)(ee,this,0),(0,S.A)(te,this).length=0,(0,C.A)(q,this,0),(0,C.A)(G,this,0),(0,S.A)(re,this)&&(0,S.A)(oe,this)){const e=(0,S.A)(oe,this);let t;for(;t=null===e||void 0===e?void 0:e.shift();){var o;null===(o=(0,S.A)(U,this))||void 0===o||o.call(this,...t)}}}}function be(){var e=this;const t=new W((0,S.A)(P,this)),o=new W((0,S.A)(P,this));(0,C.A)(le,this,t),(0,C.A)(ie,this,o),(0,C.A)(ue,this,(function(n,i){let l=arguments.length>2&&void 0!==arguments[2]?arguments[2]:_.now();if(o[n]=0!==i?l:0,t[n]=i,0!==i&&e.ttlAutopurge){const t=setTimeout((()=>{(0,S.A)(me,e).call(e,n)&&e.delete((0,S.A)(Y,e)[n])}),i+1);t.unref&&t.unref()}})),(0,C.A)(de,this,(e=>{o[e]=0!==t[e]?_.now():0})),(0,C.A)(he,this,((e,l)=>{if(t[l]){const a=t[l],s=o[l];if(!a||!s)return;e.ttl=a,e.start=s,e.now=n||i();const r=e.now-s;e.remainingTTL=a-r}}));let n=0;const i=()=>{const e=_.now();if(this.ttlResolution>0){n=e;const t=setTimeout((()=>n=0),this.ttlResolution);t.unref&&t.unref()}return e};this.getRemainingTTL=e=>{const l=(0,S.A)(K,this).get(e);if(void 0===l)return 0;const a=t[l],s=o[l];if(!a||!s)return 1/0;return a-((n||i())-s)},(0,C.A)(me,this,(e=>{const l=o[e],a=t[e];return!!a&&!!l&&(n||i())-l>a}))}function Ae(){const e=new W((0,S.A)(P,this));(0,C.A)(q,this,0),(0,C.A)(ne,this,e),(0,C.A)(pe,this,(t=>{(0,C.A)(q,this,(0,S.A)(q,this)-e[t]),e[t]=0})),(0,C.A)(ge,this,((e,t,o,n)=>{if((0,T.A)(ce,this,Ce).call(this,t))return 0;if(!R(o)){if(!n)throw new TypeError("invalid size value (must be positive integer). When maxSize or maxEntrySize is used, sizeCalculation or size must be set.");if("function"!==typeof n)throw new TypeError("sizeCalculation must be a function");if(o=n(t,e),!R(o))throw new TypeError("sizeCalculation return invalid (expect positive integer)")}return o})),(0,C.A)(fe,this,((t,o,n)=>{if(e[t]=o,(0,S.A)(V,this)){const o=(0,S.A)(V,this)-e[t];for(;(0,S.A)(q,this)>o;)(0,T.A)(ce,this,ke).call(this,!0)}(0,C.A)(q,this,(0,S.A)(q,this)+e[t]),n&&(n.entrySize=o,n.totalCalculatedSize=(0,S.A)(q,this))}))}function xe(){var e=this;let{allowStale:t=this.allowStale}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return function*(){if((0,S.A)(G,e))for(let o=(0,S.A)(ee,e);(0,T.A)(ce,e,je).call(e,o)&&(!t&&(0,S.A)(me,e).call(e,o)||(yield o),o!==(0,S.A)(Q,e));)o=(0,S.A)(J,e)[o]}()}function we(){var e=this;let{allowStale:t=this.allowStale}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return function*(){if((0,S.A)(G,e))for(let o=(0,S.A)(Q,e);(0,T.A)(ce,e,je).call(e,o)&&(!t&&(0,S.A)(me,e).call(e,o)||(yield o),o!==(0,S.A)(ee,e));)o=(0,S.A)(X,e)[o]}()}function je(e){return void 0!==e&&(0,S.A)(K,this).get((0,S.A)(Y,this)[e])===e}function ke(e){var t;const o=(0,S.A)(Q,this),n=(0,S.A)(Y,this)[o],i=(0,S.A)(Z,this)[o];if((0,S.A)(se,this)&&(0,T.A)(ce,this,Ce).call(this,i))i.__abortController.abort(new Error("evicted"));else if((0,S.A)(ae,this)||(0,S.A)(re,this)){var l,a;if((0,S.A)(ae,this))null===(l=(0,S.A)(B,this))||void 0===l||l.call(this,i,n,"evict");if((0,S.A)(re,this))null===(a=(0,S.A)(oe,this))||void 0===a||a.push([i,n,"evict"])}return(0,S.A)(pe,this).call(this,o),e&&((0,S.A)(Y,this)[o]=void 0,(0,S.A)(Z,this)[o]=void 0,(0,S.A)(te,this).push(o)),1===(0,S.A)(G,this)?((0,C.A)(Q,this,(0,C.A)(ee,this,0)),(0,S.A)(te,this).length=0):(0,C.A)(Q,this,(0,S.A)(X,this)[o]),(0,S.A)(K,this).delete(n),(0,C.A)(G,this,(t=(0,S.A)(G,this),t--,t)),o}function ye(e,t,o,n){var i=this;const l=void 0===t?void 0:(0,S.A)(Z,this)[t];if((0,T.A)(ce,this,Ce).call(this,l))return l;const a=new I,{signal:s}=o;null===s||void 0===s||s.addEventListener("abort",(()=>a.abort(s.reason)),{signal:a.signal});const r={signal:a.signal,options:o,context:n},c=function(n){let l=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const{aborted:s}=a.signal,c=o.ignoreFetchAbort&&void 0!==n;if(o.status&&(s&&!l?(o.status.fetchAborted=!0,o.status.fetchError=a.signal.reason,c&&(o.status.fetchAbortIgnored=!0)):o.status.fetchResolved=!0),s&&!c&&!l)return d(a.signal.reason);const u=h;return(0,S.A)(Z,i)[t]===h&&(void 0===n?u.__staleWhileFetching?(0,S.A)(Z,i)[t]=u.__staleWhileFetching:i.delete(e):(o.status&&(o.status.fetchUpdated=!0),i.set(e,n,r.options))),n},d=n=>{const{aborted:i}=a.signal,l=i&&o.allowStaleOnFetchAbort,s=l||o.allowStaleOnFetchRejection,r=s||o.noDeleteOnFetchRejection,c=h;if((0,S.A)(Z,this)[t]===h){!r||void 0===c.__staleWhileFetching?this.delete(e):l||((0,S.A)(Z,this)[t]=c.__staleWhileFetching)}if(s)return o.status&&void 0!==c.__staleWhileFetching&&(o.status.returnedStale=!0),c.__staleWhileFetching;if(c.__returned===c)throw n};o.status&&(o.status.fetchDispatched=!0);const h=new Promise(((t,n)=>{var i;const s=null===(i=(0,S.A)($,this))||void 0===i?void 0:i.call(this,e,l,r);s&&s instanceof Promise&&s.then((e=>t(void 0===e?void 0:e)),n),a.signal.addEventListener("abort",(()=>{o.ignoreFetchAbort&&!o.allowStaleOnFetchAbort||(t(void 0),o.allowStaleOnFetchAbort&&(t=e=>c(e,!0)))}))})).then(c,(e=>(o.status&&(o.status.fetchRejected=!0,o.status.fetchError=e),d(e)))),u=Object.assign(h,{__abortController:a,__staleWhileFetching:l,__returned:void 0});return void 0===t?(this.set(e,u,{...r.options,status:void 0}),t=(0,S.A)(K,this).get(e)):(0,S.A)(Z,this)[t]=u,u}function Ce(e){if(!(0,S.A)(se,this))return!1;const t=e;return!!t&&t instanceof Promise&&t.hasOwnProperty("__staleWhileFetching")&&t.__abortController instanceof I}function Te(e,t){(0,S.A)(J,this)[t]=e,(0,S.A)(X,this)[e]=t}function Se(e){e!==(0,S.A)(ee,this)&&(e===(0,S.A)(Q,this)?(0,C.A)(Q,this,(0,S.A)(X,this)[e]):(0,T.A)(ce,this,Te).call(this,(0,S.A)(J,this)[e],(0,S.A)(X,this)[e]),(0,T.A)(ce,this,Te).call(this,(0,S.A)(ee,this),e),(0,C.A)(ee,this,e))}var Ee=o(7119),_e=Object.defineProperty,Ne=(e,t,o)=>(((e,t,o)=>{t in e?_e(e,t,{enumerable:!0,configurable:!0,writable:!0,value:o}):e[t]=o})(e,"symbol"!=typeof t?t+"":t,o),o);const Me=function(e,t){let o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";var n;const i=document.getElementById(t.id);if(i)""!==o&&(Reflect.get(window,o)?null==(n=t.onload)||n.call(i,new Event("load")):t.onload&&i.addEventListener("load",t.onload));else{const o={...t};o.onload=null;const n=Fe(e,o);t.onload&&n.addEventListener("load",t.onload),document.head.appendChild(n)}},Fe=(e,t)=>{const o=document.createElement(e);return Object.keys(t).forEach((e=>{void 0!==t[e]&&(o[e]=t[e])})),o},Ie=e=>{let{noIconfont:t}=e;(0,i.useEffect)((()=>{const{editorExtensions:e,editorExtensionsAttrs:o,iconfontType:n}=a.h;t||("svg"===n?Me("script",{...o.iconfont,src:e.iconfont,id:"".concat(a.p,"-icon")}):Me("link",{...o.iconfontClass,rel:"stylesheet",href:e.iconfontClass,id:"".concat(a.p,"-icon-class")}))}),[])};let Le="";const Oe=e=>{const{theme:t=a.f.theme,preview:o=a.f.preview,htmlPreview:n=a.f.htmlPreview,pageFullscreen:l=a.f.pageFullscreen,previewTheme:s=a.f.previewTheme,codeTheme:r=a.f.codeTheme,language:c=a.f.language,codeStyleReverse:d=a.f.codeStyleReverse,codeStyleReverseList:h=a.f.codeStyleReverseList}=e,u=(0,i.useMemo)((()=>{const e=a.h.editorExtensions.highlight,o=a.h.editorExtensionsAttrs.highlight,{js:n}=e,i={...a.j,...e.css},{js:l,css:c={}}=o||{},u=d&&h.includes(s)?"dark":t;return{js:{src:n,...l},css:{href:i[r]?i[r][u]:a.j.atom[u],...i[r]&&c[r]?c[r][u]:c.atom?c.atom[u]:{}}}}),[d,h,s,t,r]),m=(0,i.useMemo)((()=>{const e={...a.s,...a.h.editorConfig.languageUserDefined};return e[c]?e[c]:a.s["zh-CN"]}),[c]),[p,f]=(0,i.useState)({pageFullscreen:l,fullscreen:!1,preview:o,htmlPreview:!o&&n,previewOnly:!1}),g=(0,i.useCallback)(((e,t)=>{f((o=>{const n={...o,[e]:void 0===t?!o[e]:t};return"preview"===e?(n.htmlPreview=!1,n.previewOnly=!1):"htmlPreview"===e?(n.preview=!1,n.previewOnly=!1):"previewOnly"===e&&!n.preview&&!n.htmlPreview&&(n.preview=!0),n}))}),[]);return(0,i.useEffect)((()=>{Le=document.body.style.overflow}),[]),(0,i.useEffect)((()=>{p.pageFullscreen||p.fullscreen?document.body.style.overflow="hidden":document.body.style.overflow=Le}),[p.pageFullscreen,p.fullscreen]),[u,m,p,g]},Re=()=>n.j.jsx("div",{className:"".concat(a.p,"-divider")}),He="".concat(a.p,"-dropdown-hidden"),We=e=>{const{relative:t="html"}=e,[o,l]=(0,i.useState)({overlayClass:He,overlayStyle:{}}),s=(0,i.useRef)({triggerHover:!1,overlayHover:!1}),r=(0,i.useRef)(null),c=(0,i.useRef)(null),d=(0,i.useCallback)((()=>{var o,n;s.current.triggerHover=!0;const i=r.current,a=c.current;if(!i||!a)return;const d=i.getBoundingClientRect(),h=i.offsetTop,u=i.offsetLeft,m=d.height,p=d.width,f=(null==(o=document.querySelector(t))?void 0:o.scrollLeft)||0,g=(null==(n=document.querySelector(t))?void 0:n.clientWidth)||0;let v=u-a.offsetWidth/2+p/2-f;v+a.offsetWidth>f+g&&(v=f+g-a.offsetWidth),v<0&&(v=0),l((e=>({...e,overlayStyle:{top:h+m+"px",left:v+"px"}}))),e.onChange(!0)}),[e,t]),h=()=>{s.current.overlayHover=!0};(0,i.useEffect)((()=>{e.visible?l((e=>({...e,overlayClass:""}))):l((e=>({...e,overlayClass:He})))}),[e.visible]);const u=(0,i.useRef)(-1),m=(0,i.useCallback)((t=>{r.current===t.target?s.current.triggerHover=!1:s.current.overlayHover=!1,clearTimeout(u.current),u.current=window.setTimeout((()=>{!s.current.overlayHover&&!s.current.triggerHover&&e.onChange(!1)}),10)}),[e]);(0,i.useEffect)((()=>{var e,t,o,n;return null==(e=r.current)||e.addEventListener("mouseenter",d),null==(t=r.current)||t.addEventListener("mouseleave",m),null==(o=c.current)||o.addEventListener("mouseenter",h),null==(n=c.current)||n.addEventListener("mouseleave",m),()=>{var e,t,o,n;null==(e=r.current)||e.removeEventListener("mouseenter",d),null==(t=r.current)||t.removeEventListener("mouseleave",m),null==(o=c.current)||o.removeEventListener("mouseenter",h),null==(n=c.current)||n.removeEventListener("mouseleave",m)}}),[m,d]);const p=e.children,f=e.overlay,g=(0,i.cloneElement)(p,{ref:r,key:"cloned-dropdown-trigger"}),v=n.j.jsx("div",{className:"".concat(a.p,"-dropdown ").concat(o.overlayClass),style:o.overlayStyle,ref:c,children:n.j.jsx("div",{className:"".concat(a.p,"-dropdown-overlay"),children:f instanceof Array?f[0]:f})});return n.j.jsxs(n.j.Fragment,{children:[g,v]})},ze=e=>"svg"===a.h.iconfontType?n.j.jsx("svg",{className:"".concat(a.p,"-icon"),"aria-hidden":"true",children:n.j.jsx("use",{xlinkHref:"#".concat(a.p,"-icon-").concat(e.name)})}):n.j.jsx("i",{className:"".concat(a.p,"-iconfont ").concat(a.p,"-icon-").concat(e.name)}),De=e=>{const{customIcon:t}=(0,i.useContext)(Bt),o=t[e.name];if("object"==typeof o){const e=o.component;return"function"==typeof e?n.j.jsx(e,{...o.props}):n.j.jsx("span",{dangerouslySetInnerHTML:{__html:o.component}})}return n.j.jsx(ze,{name:e.name})},Pe="".concat(a.p,"-modal-container"),Ve=e=>{const{theme:t}=(0,i.useContext)(Bt),{onClose:o=(()=>{}),onAdjust:s=(()=>{}),style:r={}}=e,[c,d]=(0,i.useState)(e.visible),[h,u]=(0,i.useState)(["".concat(a.p,"-modal")]),m=(0,i.useRef)(null),p=(0,i.useRef)(null),f=(0,i.useRef)(),g=(0,i.useRef)(null),[v,b]=(0,i.useState)({maskStyle:{zIndex:-1},modalStyle:{zIndex:-1},initPos:{left:"0px",top:"0px"},historyPos:{left:"0px",top:"0px"}}),A=(0,i.useMemo)((()=>e.isFullscreen?{width:"100%",height:"100%"}:{width:e.width,height:e.height}),[e.height,e.isFullscreen,e.width]);return(0,i.useEffect)((()=>(f.current=document.body,()=>{f.current=void 0})),[]),(0,i.useEffect)((()=>{let t=()=>{};return!e.isFullscreen&&e.visible&&(t=((e,t)=>{const o=o=>{const n=e.parentElement||document.body,i=n.offsetWidth,l=n.offsetHeight,a=document.documentElement.clientWidth,s=document.documentElement.clientHeight,r=o.offsetX,c=o.offsetY,d=e=>{let o=e.x+document.body.scrollLeft-document.body.clientLeft-r,d=e.y+document.body.scrollTop-document.body.clientTop-c;o=o<1?1:o<a-i-1?o:a-i-1,d=d<1?1:d<s-l-1?d:s-l-1,t?t(o,d):(n.style.left=o+"px",n.style.top=d+"px")};document.addEventListener("mousemove",d);const h=()=>{document.removeEventListener("mousemove",d),document.removeEventListener("mouseup",h)};document.addEventListener("mouseup",h)};return e.addEventListener("mousedown",o),()=>{e.removeEventListener("mousedown",o)}})(p.current,((e,t)=>{b((o=>({...o,initPos:{left:e+"px",top:t+"px"}})))}))),t}),[e.isFullscreen,e.visible]),(0,i.useEffect)((()=>{if(c){const e=m.current.offsetWidth/2,t=m.current.offsetHeight/2,o=document.documentElement.clientWidth/2,n=document.documentElement.clientHeight/2;b((i=>({...i,maskStyle:{zIndex:a.h.editorConfig.zIndex+(0,l.j)()},modalStyle:{zIndex:a.h.editorConfig.zIndex+(0,l.j)()},initPos:{left:o-e+"px",top:n-t+"px"}})))}}),[c]),(0,i.useEffect)((()=>{const t=e.visible;t?(u((()=>["".concat(a.p,"-modal"),"zoom-in"])),d(t)):(u((()=>["".concat(a.p,"-modal"),"zoom-out"])),setTimeout((()=>{d(t)}),150))}),[e.visible]),n.j.jsx(n.j.Fragment,{children:f.current&&(0,Ee.createPortal)(n.j.jsx("div",{ref:g,className:Pe,"data-theme":t,children:n.j.jsxs("div",{className:e.className,style:{...r,display:c?"block":"none"},children:[n.j.jsx("div",{className:"".concat(a.p,"-modal-mask"),style:v.maskStyle,onClick:o}),n.j.jsxs("div",{className:h.join(" "),style:{...v.modalStyle,...v.initPos,...A},ref:m,children:[n.j.jsx("div",{className:"".concat(a.p,"-modal-header"),ref:p,children:e.title||""}),n.j.jsxs("div",{className:"".concat(a.p,"-modal-func"),children:[e.showAdjust&&n.j.jsx("div",{className:"".concat(a.p,"-modal-adjust"),onClick:t=>{t.stopPropagation(),e.isFullscreen?b((e=>({...e,initPos:e.historyPos}))):b((e=>({...e,historyPos:e.initPos,initPos:{left:"0",top:"0"}}))),s instanceof Function&&s(!e.isFullscreen)},children:n.j.jsx(De,{name:e.isFullscreen?"suoxiao":"fangda"})}),n.j.jsx("div",{className:"".concat(a.p,"-modal-close"),onClick:t=>{t.stopPropagation(),e.onClose&&e.onClose()},children:n.j.jsx(De,{name:"close"})})]}),n.j.jsx("div",{className:"".concat(a.p,"-modal-body"),children:e.children})]})]})}),f.current)})},Be=e=>{var t,o,l,s,r;const{editorId:c,usedLanguageText:d}=(0,i.useContext)(Bt),h=(0,i.useMemo)((()=>{var t,o;switch(e.type){case"link":return null==(t=d.linkModalTips)?void 0:t.linkTitle;case"image":return null==(o=d.linkModalTips)?void 0:o.imageTitle;default:return""}}),[e.type,d]),[u,m]=(0,i.useState)({desc:"",url:""});return(0,i.useEffect)((()=>{e.visible||setTimeout((()=>{m({desc:"",url:""})}),200)}),[e.visible]),(0,i.useMemo)((()=>{var t,o,i,l,s;return n.j.jsxs(Ve,{title:h,visible:e.visible,onClose:e.onCancel,children:[n.j.jsxs("div",{className:"".concat(a.p,"-form-item"),children:[n.j.jsx("label",{className:"".concat(a.p,"-label"),htmlFor:"link-desc-".concat(c),children:null==(t=d.linkModalTips)?void 0:t.descLabel}),n.j.jsx("input",{placeholder:null==(o=d.linkModalTips)?void 0:o.descLabelPlaceHolder,className:"".concat(a.p,"-input"),id:"link-desc-".concat(c),type:"text",value:u.desc,onChange:e=>{m((t=>({...t,desc:e.target.value})))}})]}),n.j.jsxs("div",{className:"".concat(a.p,"-form-item"),children:[n.j.jsx("label",{className:"".concat(a.p,"-label"),htmlFor:"link-url-".concat(c),children:null==(i=d.linkModalTips)?void 0:i.urlLabel}),n.j.jsx("input",{placeholder:null==(l=d.linkModalTips)?void 0:l.urlLabelPlaceHolder,className:"".concat(a.p,"-input"),id:"link-url-".concat(c),type:"text",value:u.url,onChange:e=>{m((t=>({...t,url:e.target.value})))}})]}),n.j.jsx("div",{className:"".concat(a.p,"-form-item"),children:n.j.jsx("button",{className:"".concat(a.p,"-btn ").concat(a.p,"-btn-row"),type:"button",onClick:()=>{e.onOk(u),m((e=>({...e,desc:"",url:""})))},children:null==(s=d.linkModalTips)?void 0:s.buttonOK})})]})}),[h,e,null==(t=d.linkModalTips)?void 0:t.descLabel,null==(o=d.linkModalTips)?void 0:o.descLabelPlaceHolder,null==(l=d.linkModalTips)?void 0:l.urlLabel,null==(s=d.linkModalTips)?void 0:s.urlLabelPlaceHolder,null==(r=d.linkModalTips)?void 0:r.buttonOK,u])};let Ue=null;const $e=e=>{var t,o;const s=(0,i.useContext)(Bt),{editorId:r,usedLanguageText:c}=s,d=a.h.editorExtensions.cropper.instance,h=(0,i.useRef)(null),u=(0,i.useRef)(null),m=(0,i.useRef)(null),[p,f]=(0,i.useState)({cropperInited:!1,imgSelected:!1,imgSrc:"",isFullscreen:!1});(0,i.useEffect)((()=>{e.visible&&!p.cropperInited&&(window.Cropper=d||window.Cropper,h.current.onchange=()=>{if(!window.Cropper)return void l.b.emit(r,l.E,{name:"Cropper",message:"Cropper is undefined"});const e=h.current.files||[];if((null==e?void 0:e.length)>0){const t=new FileReader;t.onload=e=>{f((t=>({...t,imgSelected:!0,imgSrc:e.target.result})))},t.readAsDataURL(e[0])}})}),[e.visible,p.cropperInited]),(0,i.useEffect)((()=>{p.imgSrc&&(Ue=new window.Cropper(u.current,{viewMode:2,preview:".".concat(a.p,"-clip-preview-target")}))}),[p.imgSrc]),(0,i.useEffect)((()=>{var e;null==(e=m.current)||e.setAttribute("style","")}),[p.imgSelected]),(0,i.useEffect)((()=>{var e;null==Ue||Ue.destroy(),null==(e=m.current)||e.setAttribute("style",""),u.current&&(Ue=new window.Cropper(u.current,{viewMode:2,preview:".".concat(a.p,"-clip-preview-target")}))}),[p.isFullscreen]);const g=(0,i.useMemo)((()=>p.isFullscreen?{width:"100%",height:"100%"}:{width:"668px",height:"392px"}),[p.isFullscreen]),v=()=>{Ue.clear(),Ue.destroy(),Ue=null,h.current.value="",f((e=>({...e,imgSrc:"",imgSelected:!1})))},b=(0,i.useCallback)((e=>{f((t=>({...t,isFullscreen:e})))}),[]);return(0,i.useMemo)((()=>{var t,o;return n.j.jsxs(Ve,{className:"".concat(a.p,"-modal-clip"),title:null==(t=c.clipModalTips)?void 0:t.title,visible:e.visible,onClose:e.onCancel,showAdjust:!0,isFullscreen:p.isFullscreen,onAdjust:b,...g,children:[n.j.jsxs("div",{className:"".concat(a.p,"-form-item ").concat(a.p,"-clip"),children:[n.j.jsx("div",{className:"".concat(a.p,"-clip-main"),children:p.imgSelected?n.j.jsxs("div",{className:"".concat(a.p,"-clip-cropper"),children:[n.j.jsx("img",{src:p.imgSrc,ref:u,style:{display:"none"},alt:""}),n.j.jsx("div",{className:"".concat(a.p,"-clip-delete"),onClick:v,children:n.j.jsx(De,{name:"delete"})})]}):n.j.jsx("div",{className:"".concat(a.p,"-clip-upload"),onClick:()=>{h.current.click()},children:n.j.jsx(De,{name:"upload"})})}),n.j.jsx("div",{className:"".concat(a.p,"-clip-preview"),children:n.j.jsx("div",{className:"".concat(a.p,"-clip-preview-target"),ref:m})})]}),n.j.jsx("div",{className:"".concat(a.p,"-form-item"),children:n.j.jsx("button",{className:"".concat(a.p,"-btn"),type:"button",onClick:()=>{if(Ue){const t=Ue.getCroppedCanvas();l.b.emit(r,l.U,[(0,l.k)(t.toDataURL("image/png"))],e.onOk),v()}},children:null==(o=c.linkModalTips)?void 0:o.buttonOK})}),n.j.jsx("input",{ref:h,accept:"image/*",type:"file",multiple:!1,style:{display:"none"}})]})}),[null==(t=c.clipModalTips)?void 0:t.title,null==(o=c.linkModalTips)?void 0:o.buttonOK,e.visible,e.onCancel,e.onOk,p.isFullscreen,p.imgSelected,p.imgSrc,b,g])},Ge=e=>n.j.jsxs(n.j.Fragment,{children:[n.j.jsx(Be,{type:e.type,visible:e.linkVisible,onOk:e.onOk,onCancel:e.onCancel}),n.j.jsx($e,{visible:e.clipVisible,onOk:e.onOk,onCancel:e.onCancel})]}),qe=e=>{const[t,o]=(0,i.useState)({x:-1,y:-1}),l=(0,i.useCallback)((()=>{const t=[...e.tableShape];return(!t[2]||t[2]<t[0])&&(t[2]=t[0]),(!t[3]||t[3]<t[3])&&(t[3]=t[1]),t}),[e.tableShape]),[s,r]=(0,i.useState)(l);return(0,i.useEffect)((()=>{r(l)}),[l]),n.j.jsx("div",{className:"".concat(a.p,"-table-shape"),onMouseLeave:()=>{r(l),o({x:-1,y:-1})},children:new Array(s[1]).fill("").map(((i,l)=>n.j.jsx("div",{className:"".concat(a.p,"-table-shape-row"),children:new Array(s[0]).fill("").map(((i,c)=>n.j.jsx("div",{className:"".concat(a.p,"-table-shape-col"),onMouseEnter:()=>{o({x:l,y:c}),c+1===s[0]&&c+1<s[2]?r((e=>{const t=[...e];return t[0]=e[0]+1,t})):c+2<s[0]&&s[0]>e.tableShape[0]&&r((e=>{const t=[...e];return t[0]=e[0]-1,t})),l+1===s[1]&&l+1<s[3]?r((e=>{const t=[...e];return t[1]=e[1]+1,t})):l+2<s[1]&&s[1]>e.tableShape[1]&&r((e=>{const t=[...e];return t[1]=e[1]-1,t}))},onClick:()=>{e.onSelected(t)},children:n.j.jsx("div",{className:["".concat(a.p,"-table-shape-col-default"),l<=t.x&&c<=t.y&&"".concat(a.p,"-table-shape-col-include")].filter((e=>!!e)).join(" ")})},"table-shape-col-".concat(c))))},"table-shape-row-".concat(l))))})};let Ke=0;const Ye=i.memo((e=>{const{toolbars:t,toolbarsExclude:o,updateSetting:r}=e,{editorId:c,usedLanguageText:d,theme:h,previewTheme:u,language:m}=(0,i.useContext)(Bt),p=d,[f]=(0,i.useState)((()=>"".concat(c,"-toolbar-wrapper"))),g=(0,i.useRef)(null),v=(0,i.useRef)(null),b=(0,i.useCallback)(((e,t)=>{l.b.emit(c,l.h,e,t)}),[]),{fullscreenHandler:A}=(e=>{const{editorId:t}=(0,i.useContext)(Bt),o=(0,i.useRef)(a.h.editorExtensions.screenfull.instance),n=(0,i.useRef)(!1),s=(0,i.useCallback)((e=>{o.current?o.current.isEnabled?(n.current=!n.current,(void 0===e?!o.current.isFullscreen:e)?o.current.request():o.current.exit()):console.error("browser does not support screenfull!"):l.b.emit(t,l.E,{name:"fullscreen",message:"fullscreen is undefined"})}),[]);return(0,i.useEffect)((()=>{const t=()=>{e.updateSetting("fullscreen",n.current)};let i=-1;if(!o.current){const{editorExtensions:e,editorExtensionsAttrs:n}=a.h;i=requestAnimationFrame((()=>{var i;Me("script",{...null==(i=n.screenfull)?void 0:i.js,src:e.screenfull.js,id:"".concat(a.p,"-screenfull"),onload(){o.current=window.screenfull,o.current&&o.current.isEnabled&&o.current.on("change",t)}},"screenfull")}))}return o.current&&o.current.isEnabled&&o.current.on("change",t),()=>{o.current||cancelAnimationFrame(i),o.current&&o.current.isEnabled&&o.current.off("change",t)}}),[]),(0,i.useEffect)((()=>{l.b.on(t,{name:l.f,callback:s})}),[]),{fullscreenHandler:s}})(e),{modalData:x,setModalData:w,onCancel:j,onOk:k}=((e,t)=>{const{editorId:o}=(0,i.useContext)(Bt),[n,a]=(0,i.useState)({type:"link",linkVisible:!1,clipVisible:!1}),s=(0,i.useCallback)((()=>{a((e=>({...e,linkVisible:!1,clipVisible:!1})))}),[]),r=(0,i.useCallback)((e=>{e&&t(n.type,{desc:e.desc,url:e.url,transform:"image"===n.type}),s()}),[t,n.type,s]);return(0,i.useEffect)((()=>{l.b.on(o,{name:l.l,callback(e){a((t=>({...t,type:e,linkVisible:!0})))}}),e.current.addEventListener("change",(()=>{l.b.emit(o,l.U,Array.from(e.current.files||[])),e.current.value=""}))}),[]),{modalData:n,setModalData:a,onCancel:s,onOk:r}})(v,b),{visible:y,onTitleChange:C,onTitleClose:T,onImageChange:S,onImageClose:E,onTableChange:_,onTableSelected:N,onMermaidChange:M,onMermaidClose:F,onKatexChange:I,onKatexClose:L}=(e=>{const[t,o]=(0,i.useState)({title:!1,catalog:!1,image:!1,table:!1,mermaid:!1,katex:!1});return{visible:t,onTitleChange:(0,i.useCallback)((e=>{o((t=>({...t,title:e})))}),[]),onTitleClose:(0,i.useCallback)((()=>{o((e=>({...e,title:!1})))}),[]),onImageChange:(0,i.useCallback)((e=>{o((t=>({...t,image:e})))}),[]),onImageClose:(0,i.useCallback)((()=>{o((e=>({...e,image:!1})))}),[]),onTableChange:(0,i.useCallback)((e=>{o((t=>({...t,table:e})))}),[]),onTableSelected:(0,i.useCallback)((t=>{e("table",{selectedShape:t})}),[e]),onMermaidChange:(0,i.useCallback)((e=>{o((t=>({...t,mermaid:e})))}),[]),onMermaidClose:(0,i.useCallback)((()=>{o((e=>({...e,mermaid:!1})))}),[]),onKatexChange:(0,i.useCallback)((e=>{o((t=>({...t,katex:e})))}),[]),onKatexClose:(0,i.useCallback)((()=>{o((e=>({...e,katex:!1})))}),[])}})(b),O=(0,i.useMemo)((()=>{var t,o,i,l,s,r,c,d;return n.j.jsx(We,{relative:"#".concat(f),visible:y.title,onChange:C,overlay:n.j.jsxs("ul",{className:"".concat(a.p,"-menu"),onClick:T,children:[n.j.jsx("li",{className:"".concat(a.p,"-menu-item ").concat(a.p,"-menu-item-title"),onClick:()=>{b("h1")},children:null==(t=p.titleItem)?void 0:t.h1}),n.j.jsx("li",{className:"".concat(a.p,"-menu-item ").concat(a.p,"-menu-item-title"),onClick:()=>{b("h2")},children:null==(o=p.titleItem)?void 0:o.h2}),n.j.jsx("li",{className:"".concat(a.p,"-menu-item ").concat(a.p,"-menu-item-title"),onClick:()=>{b("h3")},children:null==(i=p.titleItem)?void 0:i.h3}),n.j.jsx("li",{className:"".concat(a.p,"-menu-item ").concat(a.p,"-menu-item-title"),onClick:()=>{b("h4")},children:null==(l=p.titleItem)?void 0:l.h4}),n.j.jsx("li",{className:"".concat(a.p,"-menu-item ").concat(a.p,"-menu-item-title"),onClick:()=>{b("h5")},children:null==(s=p.titleItem)?void 0:s.h5}),n.j.jsx("li",{className:"".concat(a.p,"-menu-item ").concat(a.p,"-menu-item-title"),onClick:()=>{b("h6")},children:null==(r=p.titleItem)?void 0:r.h6})]},"bar-title-overlay"),children:n.j.jsxs("div",{className:"".concat(a.p,"-toolbar-item"),title:null==(c=p.toolbarTips)?void 0:c.title,children:[n.j.jsx(De,{name:"title"}),e.showToolbarName&&n.j.jsx("div",{className:"".concat(a.p,"-toolbar-item-name"),children:null==(d=p.toolbarTips)?void 0:d.title})]},"bar-title-trigger")},"bar-title")}),[f,y.title,C,T,p.titleItem,p.toolbarTips,e.showToolbarName,b]),R=(0,i.useMemo)((()=>{var t,o,i,l,s;return n.j.jsx(We,{relative:"#".concat(f),visible:y.image,onChange:S,overlay:n.j.jsxs("ul",{className:"".concat(a.p,"-menu"),onClick:E,children:[n.j.jsx("li",{className:"".concat(a.p,"-menu-item ").concat(a.p,"-menu-item-image"),onClick:()=>{w((e=>({...e,type:"image",linkVisible:!0})))},children:null==(t=p.imgTitleItem)?void 0:t.link}),n.j.jsx("li",{className:"".concat(a.p,"-menu-item ").concat(a.p,"-menu-item-image"),onClick:()=>{v.current.click()},children:null==(o=p.imgTitleItem)?void 0:o.upload}),n.j.jsx("li",{className:"".concat(a.p,"-menu-item ").concat(a.p,"-menu-item-image"),onClick:()=>{w((e=>({...e,type:"image",clipVisible:!0})))},children:null==(i=p.imgTitleItem)?void 0:i.clip2upload})]},"bar-image-overlay"),children:n.j.jsxs("div",{className:"".concat(a.p,"-toolbar-item"),title:null==(l=p.toolbarTips)?void 0:l.image,children:[n.j.jsx(De,{name:"image"}),e.showToolbarName&&n.j.jsx("div",{className:"".concat(a.p,"-toolbar-item-name"),children:null==(s=p.toolbarTips)?void 0:s.image})]},"bar-image-trigger")},"bar-image")}),[f,y.image,S,E,p.imgTitleItem,p.toolbarTips,e.showToolbarName,w]),H=(0,i.useMemo)((()=>{var t,o;return n.j.jsx(We,{relative:"#".concat(f),visible:y.table,onChange:_,overlay:n.j.jsx(qe,{tableShape:e.tableShape,onSelected:N},"bar-table-overlay"),children:n.j.jsxs("div",{className:"".concat(a.p,"-toolbar-item"),title:null==(t=p.toolbarTips)?void 0:t.table,children:[n.j.jsx(De,{name:"table"}),e.showToolbarName&&n.j.jsx("div",{className:"".concat(a.p,"-toolbar-item-name"),children:null==(o=p.toolbarTips)?void 0:o.table})]},"bar-table-trigger")},"bar-table")}),[f,y.table,_,e.tableShape,e.showToolbarName,N,p.toolbarTips]),W=(0,i.useMemo)((()=>{var t,o,i,l,s,r,c,d,h,u;return n.j.jsx(We,{relative:"#".concat(f),visible:y.mermaid,onChange:M,overlay:n.j.jsxs("ul",{className:"".concat(a.p,"-menu"),onClick:F,children:[n.j.jsx("li",{className:"".concat(a.p,"-menu-item ").concat(a.p,"-menu-item-mermaid"),onClick:()=>{b("flow")},children:null==(t=p.mermaid)?void 0:t.flow}),n.j.jsx("li",{className:"".concat(a.p,"-menu-item ").concat(a.p,"-menu-item-mermaid"),onClick:()=>{b("sequence")},children:null==(o=p.mermaid)?void 0:o.sequence}),n.j.jsx("li",{className:"".concat(a.p,"-menu-item ").concat(a.p,"-menu-item-mermaid"),onClick:()=>{b("gantt")},children:null==(i=p.mermaid)?void 0:i.gantt}),n.j.jsx("li",{className:"".concat(a.p,"-menu-item ").concat(a.p,"-menu-item-mermaid"),onClick:()=>{b("class")},children:null==(l=p.mermaid)?void 0:l.class}),n.j.jsx("li",{className:"".concat(a.p,"-menu-item ").concat(a.p,"-menu-item-mermaid"),onClick:()=>{b("state")},children:null==(s=p.mermaid)?void 0:s.state}),n.j.jsx("li",{className:"".concat(a.p,"-menu-item ").concat(a.p,"-menu-item-mermaid"),onClick:()=>{b("pie")},children:null==(r=p.mermaid)?void 0:r.pie}),n.j.jsx("li",{className:"".concat(a.p,"-menu-item ").concat(a.p,"-menu-item-mermaid"),onClick:()=>{b("relationship")},children:null==(c=p.mermaid)?void 0:c.relationship}),n.j.jsx("li",{className:"".concat(a.p,"-menu-item ").concat(a.p,"-menu-item-mermaid"),onClick:()=>{b("journey")},children:null==(d=p.mermaid)?void 0:d.journey})]},"bar-mermaid-overlay"),children:n.j.jsxs("div",{className:"".concat(a.p,"-toolbar-item"),title:null==(h=p.toolbarTips)?void 0:h.mermaid,children:[n.j.jsx(De,{name:"mermaid"}),e.showToolbarName&&n.j.jsx("div",{className:"".concat(a.p,"-toolbar-item-name"),children:null==(u=p.toolbarTips)?void 0:u.mermaid})]},"bar-mermaid-trigger")},"bar-mermaid")}),[f,y.mermaid,M,F,p.mermaid,p.toolbarTips,e.showToolbarName,b]),z=(0,i.useMemo)((()=>{var t,o,i,l;return n.j.jsx(We,{relative:"#".concat(f),visible:y.katex,onChange:I,overlay:n.j.jsxs("ul",{className:"".concat(a.p,"-menu"),onClick:L,children:[n.j.jsx("li",{className:"".concat(a.p,"-menu-item ").concat(a.p,"-menu-item-katex"),onClick:()=>{b("katexInline")},children:null==(t=p.katex)?void 0:t.inline}),n.j.jsx("li",{className:"".concat(a.p,"-menu-item ").concat(a.p,"-menu-item-katex"),onClick:()=>{b("katexBlock")},children:null==(o=p.katex)?void 0:o.block})]},"bar-katex-overlay"),children:n.j.jsxs("div",{className:"".concat(a.p,"-toolbar-item"),title:null==(i=p.toolbarTips)?void 0:i.katex,children:[n.j.jsx(De,{name:"formula"}),e.showToolbarName&&n.j.jsx("div",{className:"".concat(a.p,"-toolbar-item-name"),children:null==(l=p.toolbarTips)?void 0:l.katex})]},"bar-katex-trigger")},"bar-katex")}),[f,y.katex,I,L,p.katex,p.toolbarTips,e.showToolbarName,b]),D=(0,i.useCallback)((t=>{var o,d,f,g,v,j,k,y,C,T,S,E,_,N,M,F,I,L,D,P,V,B,U,$,G,q,K,Y,Z,X,J,Q,ee,te,oe,ne,ie,le,ae,se,re,ce,de,he,ue,me,pe,fe,ge,ve;if(!a.b.includes(t)){if(e.defToolbars){const o=e.defToolbars[t];return o?(0,i.cloneElement)(o,{theme:h,previewTheme:u,language:m,insert(e){l.b.emit(c,l.h,"universal",{generate:e})}}):""}return""}switch(t){case"-":return n.j.jsx(Re,{},"bar-".concat(Ke++));case"bold":return n.j.jsxs("div",{className:"".concat(a.p,"-toolbar-item"),title:null==(o=p.toolbarTips)?void 0:o.bold,onClick:()=>{b("bold")},children:[n.j.jsx(De,{name:"bold"}),e.showToolbarName&&n.j.jsx("div",{className:"".concat(a.p,"-toolbar-item-name"),children:null==(d=p.toolbarTips)?void 0:d.bold})]},"bar-bold");case"underline":return n.j.jsxs("div",{className:"".concat(a.p,"-toolbar-item"),title:null==(f=p.toolbarTips)?void 0:f.underline,onClick:()=>{b("underline")},children:[n.j.jsx(De,{name:"underline"}),e.showToolbarName&&n.j.jsx("div",{className:"".concat(a.p,"-toolbar-item-name"),children:null==(g=p.toolbarTips)?void 0:g.underline})]},"bar-underline");case"italic":return n.j.jsxs("div",{className:"".concat(a.p,"-toolbar-item"),title:null==(v=p.toolbarTips)?void 0:v.italic,onClick:()=>{b("italic")},children:[n.j.jsx(De,{name:"italic"}),e.showToolbarName&&n.j.jsx("div",{className:"".concat(a.p,"-toolbar-item-name"),children:null==(j=p.toolbarTips)?void 0:j.italic})]},"bar-italic");case"strikeThrough":return n.j.jsxs("div",{className:"".concat(a.p,"-toolbar-item"),title:null==(k=p.toolbarTips)?void 0:k.strikeThrough,onClick:()=>{b("strikeThrough")},children:[n.j.jsx(De,{name:"strike-through"}),e.showToolbarName&&n.j.jsx("div",{className:"".concat(a.p,"-toolbar-item-name"),children:null==(y=p.toolbarTips)?void 0:y.strikeThrough})]},"bar-strikeThrough");case"title":return O;case"sub":return n.j.jsxs("div",{className:"".concat(a.p,"-toolbar-item"),title:null==(C=p.toolbarTips)?void 0:C.sub,onClick:()=>{b("sub")},children:[n.j.jsx(De,{name:"sub"}),e.showToolbarName&&n.j.jsx("div",{className:"".concat(a.p,"-toolbar-item-name"),children:null==(T=p.toolbarTips)?void 0:T.sub})]},"bar-sub");case"sup":return n.j.jsxs("div",{className:"".concat(a.p,"-toolbar-item"),title:null==(S=p.toolbarTips)?void 0:S.sup,onClick:()=>{b("sup")},children:[n.j.jsx(De,{name:"sup"}),e.showToolbarName&&n.j.jsx("div",{className:"".concat(a.p,"-toolbar-item-name"),children:null==(E=p.toolbarTips)?void 0:E.sup})]},"bar-sup");case"quote":return n.j.jsxs("div",{className:"".concat(a.p,"-toolbar-item"),title:null==(_=p.toolbarTips)?void 0:_.quote,onClick:()=>{b("quote")},children:[n.j.jsx(De,{name:"quote"}),e.showToolbarName&&n.j.jsx("div",{className:"".concat(a.p,"-toolbar-item-name"),children:null==(N=p.toolbarTips)?void 0:N.quote})]},"bar-quote");case"unorderedList":return n.j.jsxs("div",{className:"".concat(a.p,"-toolbar-item"),title:null==(M=p.toolbarTips)?void 0:M.unorderedList,onClick:()=>{b("unorderedList")},children:[n.j.jsx(De,{name:"unordered-list"}),e.showToolbarName&&n.j.jsx("div",{className:"".concat(a.p,"-toolbar-item-name"),children:null==(F=p.toolbarTips)?void 0:F.unorderedList})]},"bar-unorderedList");case"orderedList":return n.j.jsxs("div",{className:"".concat(a.p,"-toolbar-item"),title:null==(I=p.toolbarTips)?void 0:I.orderedList,onClick:()=>{b("orderedList")},children:[n.j.jsx(De,{name:"ordered-list"}),e.showToolbarName&&n.j.jsx("div",{className:"".concat(a.p,"-toolbar-item-name"),children:null==(L=p.toolbarTips)?void 0:L.orderedList})]},"bar-orderedList");case"task":return n.j.jsxs("div",{className:"".concat(a.p,"-toolbar-item"),title:null==(D=p.toolbarTips)?void 0:D.task,onClick:()=>{b("task")},children:[n.j.jsx(De,{name:"task"}),e.showToolbarName&&n.j.jsx("div",{className:"".concat(a.p,"-toolbar-item-name"),children:null==(P=p.toolbarTips)?void 0:P.task})]},"bar-task");case"codeRow":return n.j.jsxs("div",{className:"".concat(a.p,"-toolbar-item"),title:null==(V=p.toolbarTips)?void 0:V.codeRow,onClick:()=>{b("codeRow")},children:[n.j.jsx(De,{name:"code-row"}),e.showToolbarName&&n.j.jsx("div",{className:"".concat(a.p,"-toolbar-item-name"),children:null==(B=p.toolbarTips)?void 0:B.codeRow})]},"bar-codeRow");case"code":return n.j.jsxs("div",{className:"".concat(a.p,"-toolbar-item"),title:null==(U=p.toolbarTips)?void 0:U.code,onClick:()=>{b("code")},children:[n.j.jsx(De,{name:"code"}),e.showToolbarName&&n.j.jsx("div",{className:"".concat(a.p,"-toolbar-item-name"),children:null==($=p.toolbarTips)?void 0:$.code})]},"bar-code");case"link":return n.j.jsxs("div",{className:"".concat(a.p,"-toolbar-item"),title:null==(G=p.toolbarTips)?void 0:G.link,onClick:()=>{w({...x,type:"link",linkVisible:!0})},children:[n.j.jsx(De,{name:"link"}),e.showToolbarName&&n.j.jsx("div",{className:"".concat(a.p,"-toolbar-item-name"),children:null==(q=p.toolbarTips)?void 0:q.link})]},"bar-link");case"image":return e.noUploadImg?n.j.jsxs("div",{className:"".concat(a.p,"-toolbar-item"),title:null==(K=p.toolbarTips)?void 0:K.image,onClick:()=>{w((e=>({...e,type:"image",linkVisible:!0})))},children:[n.j.jsx(De,{name:"image"}),e.showToolbarName&&n.j.jsx("div",{className:"".concat(a.p,"-toolbar-item-name"),children:null==(Y=p.toolbarTips)?void 0:Y.image})]},"bar-image-no-upload"):R;case"table":return H;case"revoke":return n.j.jsxs("div",{className:"".concat(a.p,"-toolbar-item"),title:null==(Z=p.toolbarTips)?void 0:Z.revoke,onClick:()=>{l.b.emit(c,l.n)},children:[n.j.jsx(De,{name:"revoke"}),e.showToolbarName&&n.j.jsx("div",{className:"".concat(a.p,"-toolbar-item-name"),children:null==(X=p.toolbarTips)?void 0:X.revoke})]},"bar-revoke");case"next":return n.j.jsxs("div",{className:"".concat(a.p,"-toolbar-item"),title:null==(J=p.toolbarTips)?void 0:J.next,onClick:()=>{l.b.emit(c,l.m)},children:[n.j.jsx(De,{name:"next"}),e.showToolbarName&&n.j.jsx("div",{className:"".concat(a.p,"-toolbar-item-name"),children:null==(Q=p.toolbarTips)?void 0:Q.next})]},"bar-next");case"save":return n.j.jsxs("div",{className:"".concat(a.p,"-toolbar-item"),title:null==(ee=p.toolbarTips)?void 0:ee.save,onClick:()=>{l.b.emit(c,l.O)},children:[n.j.jsx(De,{name:"baocun"}),e.showToolbarName&&n.j.jsx("div",{className:"".concat(a.p,"-toolbar-item-name"),children:null==(te=p.toolbarTips)?void 0:te.save})]},"bar-save");case"prettier":return e.noPrettier?"":n.j.jsxs("div",{className:"".concat(a.p,"-toolbar-item"),title:null==(oe=p.toolbarTips)?void 0:oe.prettier,onClick:()=>{b("prettier")},children:[n.j.jsx(De,{name:"prettier"}),e.showToolbarName&&n.j.jsx("div",{className:"".concat(a.p,"-toolbar-item-name"),children:null==(ne=p.toolbarTips)?void 0:ne.prettier})]},"bar-prettier");case"pageFullscreen":return!e.setting.fullscreen&&n.j.jsxs("div",{className:"".concat(a.p,"-toolbar-item"),title:null==(ie=p.toolbarTips)?void 0:ie.pageFullscreen,onClick:()=>{r("pageFullscreen")},children:[n.j.jsx(De,{name:e.setting.pageFullscreen?"suoxiao":"fangda"}),e.showToolbarName&&n.j.jsx("div",{className:"".concat(a.p,"-toolbar-item-name"),children:null==(le=p.toolbarTips)?void 0:le.pageFullscreen})]},"bar-pageFullscreen");case"fullscreen":return n.j.jsxs("div",{className:"".concat(a.p,"-toolbar-item"),title:null==(ae=p.toolbarTips)?void 0:ae.fullscreen,onClick:()=>{A()},children:[n.j.jsx(De,{name:e.setting.fullscreen?"fullscreen-exit":"fullscreen"}),e.showToolbarName&&n.j.jsx("div",{className:"".concat(a.p,"-toolbar-item-name"),children:null==(se=p.toolbarTips)?void 0:se.fullscreen})]},"bar-fullscreen");case"catalog":return n.j.jsxs("div",{className:"".concat(a.p,"-toolbar-item"),title:null==(re=p.toolbarTips)?void 0:re.catalog,onClick:()=>{l.b.emit(c,l.C)},children:[n.j.jsx(De,{name:"catalog"}),e.showToolbarName&&n.j.jsx("div",{className:"".concat(a.p,"-toolbar-item-name"),children:null==(ce=p.toolbarTips)?void 0:ce.catalog})]},"bar-catalog");case"preview":return n.j.jsxs("div",{className:"".concat(a.p,"-toolbar-item"),title:null==(de=p.toolbarTips)?void 0:de.preview,onClick:()=>{r("preview")},children:[n.j.jsx(De,{name:"preview"}),e.showToolbarName&&n.j.jsx("div",{className:"".concat(a.p,"-toolbar-item-name"),children:null==(he=p.toolbarTips)?void 0:he.preview})]},"bar-preview");case"previewOnly":return n.j.jsxs("div",{className:"".concat(a.p,"-toolbar-item"),title:null==(ue=p.toolbarTips)?void 0:ue.previewOnly,onClick:()=>{e.updateSetting("previewOnly")},children:[n.j.jsx(De,{name:"preview-only"}),e.showToolbarName&&n.j.jsx("div",{className:"".concat(a.p,"-toolbar-item-name"),children:null==(me=p.toolbarTips)?void 0:me.previewOnly})]},"bar-preview-only");case"htmlPreview":return n.j.jsxs("div",{className:"".concat(a.p,"-toolbar-item"),title:null==(pe=p.toolbarTips)?void 0:pe.htmlPreview,onClick:()=>{r("htmlPreview")},children:[n.j.jsx(De,{name:"coding"}),e.showToolbarName&&n.j.jsx("div",{className:"".concat(a.p,"-toolbar-item-name"),children:null==(fe=p.toolbarTips)?void 0:fe.htmlPreview})]},"bar-htmlPreview");case"github":return n.j.jsxs("div",{className:"".concat(a.p,"-toolbar-item"),title:null==(ge=p.toolbarTips)?void 0:ge.github,onClick:()=>(0,s.uM)("https://github.com/imzbf/md-editor-rt"),children:[n.j.jsx(De,{name:"github"}),e.showToolbarName&&n.j.jsx("div",{className:"".concat(a.p,"-toolbar-item-name"),children:null==(ve=p.toolbarTips)?void 0:ve.github})]},"bar-github");case"mermaid":return W;case"katex":return z}}),[e,p.toolbarTips,b,O,w,x,R,H,c,r,A,W,z,h,m,u]),P=(0,i.useMemo)((()=>{const e=t.filter((e=>!o.includes(e))),n=e.indexOf("="),i=-1===n?e:e.slice(0,n+1),l=-1===n?[]:e.slice(n,Number.MAX_SAFE_INTEGER);return[i.map((e=>D(e))),l.map((e=>D(e)))]}),[t,o,D]);return(0,i.useEffect)((()=>{let e=()=>{};return g.current&&(e=(0,s.b1)(g.current)),()=>{e()}}),[t]),n.j.jsxs(n.j.Fragment,{children:[t.length>0&&n.j.jsx("div",{className:"".concat(a.p,"-toolbar-wrapper"),ref:g,id:f,children:n.j.jsxs("div",{className:(0,l.c)(["".concat(a.p,"-toolbar"),e.showToolbarName&&"".concat(a.p,"-stn")]),children:[n.j.jsx("div",{className:"".concat(a.p,"-toolbar-left"),children:P[0]}),n.j.jsx("div",{className:"".concat(a.p,"-toolbar-right"),children:P[1]})]})}),n.j.jsx("input",{ref:v,accept:"image/*",type:"file",multiple:!0,style:{display:"none"}}),n.j.jsx(Ge,{linkVisible:x.linkVisible,clipVisible:x.clipVisible,type:x.type,onCancel:j,onOk:k})]})})),Ze=".".concat(a.p,"-preview > [data-line]"),Xe=(e,t)=>{const o=(0,s.sg)((()=>{e.removeEventListener("scroll",n),e.addEventListener("scroll",n),t.removeEventListener("scroll",n),t.addEventListener("scroll",n)}),50),n=i=>{const l=e.clientHeight,a=t.clientHeight,s=(e.scrollHeight-l)/(t.scrollHeight-a);i.target===e?(t.removeEventListener("scroll",n),t.scrollTo({top:e.scrollTop/s}),o()):(e.removeEventListener("scroll",n),e.scrollTo({top:t.scrollTop*s}),o())};return[()=>{o().finally((()=>{e.dispatchEvent(new Event("scroll"))}))},()=>{e.removeEventListener("scroll",n),t.removeEventListener("scroll",n)}]},Je=(e,t,o)=>{const{view:n}=o,i=(0,s.Uw)(),l=e=>n.lineBlockAt(n.state.doc.line(e).from).top,a=e=>n.lineBlockAt(n.state.doc.line(e).from).height;let r=[],c=[],d=[];let h=0,u=0;const m=(0,s.nF)((o=>{var s;const{scrollDOM:m,contentHeight:p}=n;if(p<=m.clientHeight||t.firstElementChild.clientHeight<=t.clientHeight||n.state.doc.lines<(null==(s=r[r.length-1])?void 0:s.end))return!1;o.target===e?(()=>{var e,o;if(0!==u)return!1;h++;const{scrollDOM:s,contentHeight:c}=n;let d=+getComputedStyle(t).paddingTop.replace("px","");const m=n.lineBlockAtHeight(s.scrollTop),{number:p}=n.state.doc.lineAt(m.from),f=r[p-1];if(!f)return!1;let g=l(f.end)+a(f.end),v=0;const b=l(f.start),A=t.querySelector('[data-line="'.concat(f.start-1,'"]'))||(null==(e=t.firstElementChild)?void 0:e.firstElementChild),x=t.querySelector('[data-line="'.concat(f.end,'"]'))||(null==(o=t.lastElementChild)?void 0:o.lastElementChild);let w=0,j=0;0===b?(v=s.scrollTop/g,A===x?(d=0,g=c-s.offsetHeight,w=x.offsetTop+x.offsetHeight-t.clientHeight):w=x.offsetTop):(v=(s.scrollTop-b)/(g-b),j=A.offsetTop,w=x.offsetTop-j),g>s.scrollHeight-s.clientHeight&&(v=(s.scrollTop-b)/(s.scrollHeight-s.clientHeight-b),j=A.offsetTop,w=t.scrollHeight-t.clientHeight-j+10),i(t,j-d+w*v,(()=>{h--}))})():(()=>{var o,s,m,p,f,g;if(0!==h)return;u++;const{scrollDOM:v}=n,b=t.scrollTop,A=t.scrollHeight;let x=null==(o=t.firstElementChild)?void 0:o.firstElementChild,w=null==(s=t.firstElementChild)?void 0:s.lastElementChild;if(d.length>0){let e=Math.ceil(Number(d[d.length-1])*(b/A)),o=d.findLastIndex((t=>t<=e));o=-1===o?0:o,e=d[o];for(let t=o;t>=0&&t<d.length;){if(c[t].offsetTop>b){if(t-1>=0){t--;continue}e=-1,o=t;break}if(!(t+1<d.length&&c[t+1].offsetTop<b)){e=d[t],o=t;break}t++}switch(e){case-1:x=null==(m=t.firstElementChild)?void 0:m.firstElementChild,w=c[o];break;case d.length-1:x=c[o],w=null==(p=t.firstElementChild)?void 0:p.lastElementChild;break;default:x=c[o],w=c[o+1===c.length?o:o+1]}}const j=x===(null==(f=t.firstElementChild)?void 0:f.firstElementChild)?0:x.offsetTop;let k=w.offsetTop,y=0;const{start:C,end:T}=r[Number(x.dataset.line||0)],S=l(C);let E=l(T===n.state.doc.lines?T:T+1),_=0;E>v.scrollHeight-v.clientHeight||w.scrollTop>t.scrollHeight-t.clientHeight?(y=Math.max((b-j)/(t.scrollHeight-j-t.clientHeight),0),E=l(n.state.doc.lines)+a(n.state.doc.lines),_=8+E-S-e.clientHeight):x===(null==(g=t.firstElementChild)?void 0:g.firstElementChild)?(x===w&&(k=w.offsetTop+w.offsetHeight+ +getComputedStyle(w).marginBottom.replace("px","")),_=E,y=Math.max(b/k,0)):(y=Math.max((b-j)/(k-j),0),_=E-S),i(e,S+_*y,(()=>{u--}))})()}),1);return[()=>{(()=>{var e;r=[],c=[],d=[],c=c.concat(Array.from(t.querySelectorAll(Ze)));const o=c.map((e=>Number(e.dataset.line)+1));d=d.concat(o);const{lines:i}=n.state.doc;let l=1,a=null!==(e=o.shift())&&void 0!==e?e:i;for(let t=1;t<=i;t++)t===a&&(l=t,a=o.shift()||i+1),r.push({start:l,end:a-1})})(),e.addEventListener("scroll",m),t.addEventListener("scroll",m),e.dispatchEvent(new Event("scroll"))},()=>{e.removeEventListener("scroll",m),t.removeEventListener("scroll",m)}]},Qe=(e,t,o)=>{var n;let i="",s=0,r=0,c=!0,d=!1;const h=t.getSelectedText(),u=a.h.editorConfig.mermaidTemplate;if(/^h[1-6]{1}$/.test(e)){const t=e.replace(/^h(\d)/,((e,t)=>new Array(Number(t)).fill("#",0,t).join("")));i="".concat(t," ").concat(h),s=t.length+1}else if("prettier"===e){const e=window.prettier||a.h.editorExtensions.prettier.prettierInstance,s=[(null==(n=window.prettierPlugins)?void 0:n.markdown)||a.h.editorExtensions.prettier.parserMarkdownInstance];e&&void 0!==s[0]?i=e.format(t.getValue(),{parser:"markdown",plugins:s}):(l.b.emit(o.editorId,l.E,{name:"prettier",message:"prettier is undefined"}),i=t.getValue()),c=!1,d=!0}else switch(e){case"bold":i="**".concat(h,"**"),s=2,r=-2;break;case"underline":i="<u>".concat(h,"</u>"),s=3,r=-4;break;case"italic":i="*".concat(h,"*"),s=1,r=-1;break;case"strikeThrough":i="~~".concat(h,"~~"),s=2,r=-2;break;case"sub":i="<sub>".concat(h,"</sub>"),s=5,r=-6;break;case"sup":i="<sup>".concat(h,"</sup>"),s=5,r=-6;break;case"codeRow":i="`"+h+"`",s=1,r=-1;break;case"quote":i="> ".concat(h),s=2;break;case"orderedList":i="1. ".concat(h),s=3;break;case"unorderedList":i="- ".concat(h),s=2;break;case"task":i="- [ ] ".concat(h),s=6;break;case"code":{const e=o.text||h||"",t=o.mode||"language";i="```".concat(t,"\n").concat(e,"\n```\n"),s=3,r=3+t.length-i.length;break}case"table":{i="|";const{selectedShape:e={x:1,y:1}}=o,{x:t,y:n}=e;for(let o=0;o<=n;o++)i+=" col |";i+="\n|";for(let o=0;o<=n;o++)i+=" - |";for(let o=0;o<=t;o++){i+="\n|";for(let e=0;e<=n;e++)i+=" content |"}s=2,r=5-i.length;break}case"link":{const{desc:e,url:t}=o;i="[".concat(e,"](").concat(t,")"),c=!1;break}case"image":{const{desc:e,url:t,urls:n}=o;i=n instanceof Array?n.reduce(((e,t)=>{const{url:o="",alt:n="",title:i=""}="object"==typeof t?t:{url:t};return e+"![".concat(n,"](").concat(o).concat(i?" '"+i+"'":"",")\n")}),""):"![".concat(e,"](").concat(t,")\n"),c=!1;break}case"flow":i="```mermaid\n".concat((null==u?void 0:u.flow)||"flowchart TD \n  Start --\x3e Stop","\n```\n"),s=3,r=10-i.length;break;case"sequence":i="```mermaid\n".concat((null==u?void 0:u.sequence)||"sequenceDiagram\n  A->>B: hello!\n  B--\x3e>A: hi!\n  A-)B: bye!","\n```\n"),s=3,r=10-i.length;break;case"gantt":i="```mermaid\n".concat((null==u?void 0:u.gantt)||"gantt\ntitle A Gantt Diagram\ndateFormat  YYYY-MM-DD\nsection Section\nA task  :a1, 2014-01-01, 30d\nAnother task  :after a1, 20d","\n```\n"),s=3,r=10-i.length;break;case"class":i="```mermaid\n".concat((null==u?void 0:u.class)||"classDiagram\n  class Animal\n  Vehicle <|-- Car","\n```\n"),s=3,r=10-i.length;break;case"state":i="```mermaid\n".concat((null==u?void 0:u.state)||"stateDiagram-v2\n  s1 --\x3e s2","\n```\n"),s=3,r=10-i.length;break;case"pie":i="```mermaid\n".concat((null==u?void 0:u.pie)||'pie title Pets adopted by volunteers\n  "Dogs" : 386\n  "Cats" : 85\n  "Rats" : 15',"\n```\n"),s=3,r=10-i.length;break;case"relationship":i="```mermaid\n".concat((null==u?void 0:u.relationship)||"erDiagram\n  CAR ||--o{ NAMED-DRIVER : allows\n  PERSON ||--o{ NAMED-DRIVER : is","\n```\n"),s=3,r=10-i.length;break;case"journey":i="```mermaid\n".concat((null==u?void 0:u.journey)||"journey\n  title My working day\n  section Go to work\n    Make tea: 5: Me\n    Go upstairs: 3: Me\n    Do work: 1: Me, Cat\n  section Go home\n    Go downstairs: 5: Me\n    Sit down: 5: Me","\n```\n"),s=3,r=10-i.length;break;case"katexInline":i="$$",s=1,r=-1;break;case"katexBlock":i="$$\n\n$$\n",s=3,r=-4;break;case"universal":{var m;const{generate:e}=o,t=e(h);i=t.targetValue,c=null===(m=t.select)||void 0===m||m,s=t.deviationStart||0,r=t.deviationEnd||0}}return{text:i,options:{select:c,deviationStart:s,deviationEnd:r,replaceAll:d}}},et=e=>{const t=new h.xx;return o=>(t.get(e.state)?e.dispatch({effects:t.reconfigure(o)}):e.dispatch({effects:h.Pe.appendConfig.of(t.of(o))}),!0)};class tt{constructor(e){Ne(this,"view"),Ne(this,"maxLength",Number.MAX_SAFE_INTEGER),Ne(this,"toggleTabSize"),Ne(this,"togglePlaceholder"),Ne(this,"setExtensions"),Ne(this,"toggleDisabled"),Ne(this,"toggleReadOnly"),Ne(this,"toggleMaxlength"),this.view=e,this.toggleTabSize=et(this.view),this.togglePlaceholder=et(this.view),this.setExtensions=et(this.view),this.toggleDisabled=et(this.view),this.toggleReadOnly=et(this.view),this.toggleMaxlength=et(this.view)}getValue(){return this.view.state.doc.toString()}setValue(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.view.state.doc.length;this.view.dispatch({changes:{from:t,to:o,insert:e}})}getSelectedText(){const{from:e,to:t}=this.view.state.selection.main;return this.view.state.sliceDoc(e,t)}replaceSelectedText(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{select:!0,deviationStart:0,deviationEnd:0,replaceAll:!1},o=arguments.length>2?arguments[2]:void 0;try{if(t.replaceAll){if(this.setValue(e),e.length>this.maxLength)throw new Error("The input text is too long");return}if(this.view.state.doc.length-this.getSelectedText().length+e.length>this.maxLength)throw new Error("The input text is too long");const{from:o}=this.view.state.selection.main;if(this.view.dispatch(this.view.state.replaceSelection(e)),t.select){const n=o+e.length+t.deviationEnd;this.view.dispatch({selection:h.OF.create([h.OF.range(o+t.deviationStart,n),h.OF.cursor(n)],1)})}this.view.focus()}catch(n){if("The input text is too long"!==n.message)throw n;l.b.emit(o,l.E,{name:"overlength",message:n.message,data:e})}}setTabSize(e){this.toggleTabSize([h.$t.tabSize.of(e),m.Xt.of(" ".repeat(e))])}setPlaceholder(e){this.togglePlaceholder((0,r.qf)(e))}focus(e){if(this.view.focus(),!e)return;let t=0,o=0,n=0;switch(e){case"start":break;case"end":t=o=n=this.getValue().length;break;default:t=e.rangeAnchor||e.cursorPos,o=e.rangeHead||e.cursorPos,n=e.cursorPos}this.view.dispatch({scrollIntoView:!0,selection:h.OF.create([h.OF.range(t,o),h.OF.cursor(n)],1)})}setDisabled(e){this.toggleDisabled([r.Lz.editable.of(!e)])}setReadOnly(e){this.toggleReadOnly([h.$t.readOnly.of(e)])}setMaxLength(e){this.maxLength=e,this.toggleMaxlength([h.$t.changeFilter.of((t=>t.newDoc.length<=e))])}}const ot="var(--md-color)",nt="var(--md-color)",it="#e5c07b",lt="#d19a66",at="var(--md-bk-color)",st="var(--md-bk-color)",rt="#528bff",ct=r.Lz.theme({"&":{color:nt,backgroundColor:at},".cm-content":{caretColor:rt},".cm-cursor, .cm-dropCursor":{borderLeftColor:rt},"&.cm-focused > .cm-scroller > .cm-selectionLayer .cm-selectionBackground, .cm-selectionBackground, .cm-content ::selection":{backgroundColor:"#ceedfa33"},".cm-panels":{backgroundColor:"#21252b",color:nt},".cm-panels.cm-panels-top":{borderBottom:"1px solid var(--md-border-color)"},".cm-panels.cm-panels-bottom":{borderTop:"1px solid var(--md-border-color)"},".cm-searchMatch":{backgroundColor:"#72a1ff59",outline:"1px solid #457dff"},".cm-searchMatch.cm-searchMatch-selected":{backgroundColor:"#6199ff2f"},".cm-activeLine":{backgroundColor:"#ceedfa33"},".cm-selectionMatch":{backgroundColor:"#aafe661a"},"&.cm-focused .cm-matchingBracket, &.cm-focused .cm-nonmatchingBracket":{backgroundColor:"#bad0f847"},".cm-gutters":{backgroundColor:at,color:nt,borderRight:"1px solid",borderColor:"var(--md-border-color)"},".cm-activeLineGutter":{backgroundColor:"#2c313a"},".cm-foldPlaceholder":{backgroundColor:"transparent",border:"none",color:"#ddd"},".cm-tooltip":{border:"1px solid var(--md-border-color)",backgroundColor:st},".cm-tooltip .cm-tooltip-arrow:before":{borderTopColor:"transparent",borderBottomColor:"transparent"},".cm-tooltip .cm-tooltip-arrow:after":{borderTopColor:st,borderBottomColor:st},".cm-tooltip-autocomplete":{"& > ul > li[aria-selected]":{color:nt}}},{dark:!0}),dt=m.cr.define([{tag:p._A.keyword,color:"#c678dd"},{tag:[p._A.name,p._A.deleted,p._A.character,p._A.propertyName,p._A.macroName],color:ot},{tag:[p._A.function(p._A.variableName),p._A.labelName],color:"#e5c07b"},{tag:[p._A.color,p._A.constant(p._A.name),p._A.standard(p._A.name)],color:lt},{tag:[p._A.definition(p._A.name),p._A.separator],color:nt},{tag:[p._A.typeName,p._A.className,p._A.number,p._A.changed,p._A.annotation,p._A.modifier,p._A.self,p._A.namespace],color:"#e5c07b"},{tag:[p._A.operator,p._A.operatorKeyword,p._A.url,p._A.escape,p._A.regexp,p._A.link,p._A.special(p._A.string)],color:"#56b6c2"},{tag:[p._A.meta,p._A.comment],color:it},{tag:p._A.strong,fontWeight:"bold"},{tag:p._A.emphasis,fontStyle:"italic"},{tag:p._A.strikethrough,textDecoration:"line-through"},{tag:p._A.link,color:it,textDecoration:"underline"},{tag:p._A.heading,fontWeight:"bold",color:ot},{tag:[p._A.atom,p._A.bool,p._A.special(p._A.variableName)],color:lt},{tag:[p._A.processingInstruction,p._A.string,p._A.inserted],color:"var(--md-color)"},{tag:p._A.invalid,color:"#ffffff"}]),ht=[ct,(0,m.y9)(dt)],ut="#3f4a54",mt="#3f4a54",pt="#2d8cf0",ft="#d19a66",gt="var(--md-bk-color)",vt="var(--md-bk-color)",bt="#3f4a54",At=r.Lz.theme({"&":{color:mt,backgroundColor:gt},".cm-content":{caretColor:bt},".cm-cursor, .cm-dropCursor":{borderLeftColor:bt},"&.cm-focused > .cm-scroller > .cm-selectionLayer .cm-selectionBackground, .cm-selectionBackground, .cm-content ::selection":{backgroundColor:"#bad5fa"},".cm-panels":{backgroundColor:"#f6f6f6",color:mt},".cm-panels.cm-panels-top":{borderBottom:"1px solid var(--md-border-color)"},".cm-panels.cm-panels-bottom":{borderTop:"1px solid var(--md-border-color)"},".cm-searchMatch":{backgroundColor:"#72a1ff59",outline:"1px solid #457dff"},".cm-searchMatch.cm-searchMatch-selected":{backgroundColor:"#6199ff2f"},".cm-activeLine":{backgroundColor:"#ceedfa33"},".cm-selectionMatch":{backgroundColor:"#aafe661a"},"&.cm-focused .cm-matchingBracket, &.cm-focused .cm-nonmatchingBracket":{backgroundColor:"#bad0f847"},".cm-gutters":{backgroundColor:gt,color:mt,borderRight:"1px solid",borderColor:"var(--md-border-color)"},".cm-activeLineGutter":{backgroundColor:"#ceedfa33"},".cm-foldPlaceholder":{backgroundColor:"transparent",border:"none",color:"#ddd"},".cm-tooltip":{border:"1px solid var(--md-border-color)",backgroundColor:vt},".cm-tooltip .cm-tooltip-arrow:before":{borderTopColor:"transparent",borderBottomColor:"transparent"},".cm-tooltip .cm-tooltip-arrow:after":{borderTopColor:vt,borderBottomColor:vt},".cm-tooltip-autocomplete":{"& > ul > li[aria-selected]":{color:mt}}}),xt=m.cr.define([{tag:p._A.keyword,color:"#c678dd"},{tag:[p._A.name,p._A.deleted,p._A.character,p._A.propertyName,p._A.macroName],color:ut},{tag:[p._A.function(p._A.variableName),p._A.labelName],color:"#2d8cf0"},{tag:[p._A.color,p._A.constant(p._A.name),p._A.standard(p._A.name)],color:ft},{tag:[p._A.definition(p._A.name),p._A.separator],color:mt},{tag:[p._A.typeName,p._A.className,p._A.number,p._A.changed,p._A.annotation,p._A.modifier,p._A.self,p._A.namespace],color:"#e5c07b"},{tag:[p._A.operator,p._A.operatorKeyword,p._A.url,p._A.escape,p._A.regexp,p._A.link,p._A.special(p._A.string)],color:"#56b6c2"},{tag:[p._A.meta,p._A.comment],color:pt},{tag:p._A.strong,fontWeight:"bold"},{tag:p._A.emphasis,fontStyle:"italic"},{tag:p._A.strikethrough,textDecoration:"line-through"},{tag:p._A.link,color:pt,textDecoration:"underline"},{tag:p._A.heading,fontWeight:"bold",color:ut},{tag:[p._A.atom,p._A.bool,p._A.special(p._A.variableName)],color:ft},{tag:[p._A.processingInstruction,p._A.string,p._A.inserted],color:"#3f4a54"},{tag:p._A.invalid,color:"#fff"}]),wt=[At,(0,m.y9)(xt)],jt=(e,t,o,n,i)=>(l,a,s,r)=>{const c="".concat(e).concat(t).slice(r-s);l.dispatch(l.state.replaceSelection("".concat(c).concat(o).concat(n)));const d=s+a.label.length+("title"===i?o.length:0);l.dispatch({selection:h.OF.create([h.OF.range(s+a.label.length+("title"===i?1:-t.length),d),h.OF.cursor(d)],1)}),l.focus()},kt=e=>(t,o,n,i)=>{const l=e.slice(i-n);t.dispatch(t.state.replaceSelection("".concat(l," ")))},yt=e=>{const t=e=>{const t=e.matchBefore(/^#+|^-\s*\[*\s*\]*|`+|\[|!\[*|^\|\s?\|?|\$\$?|!+\s*\w*/);return null===t||t.from==t.to&&e.explicit?null:{from:t.from,options:[...["h1","h2","h3","h4","h5","h6"].map(((e,t)=>{const o=new Array(t+1).fill("#").join("");return{label:o,type:"text",apply:kt(o)}})),...["unchecked","checked"].map((e=>{const t="checked"===e?"- [x]":"- [ ]";return{label:t,type:"text",apply:kt(t)}})),...[["`",""],["```","language"],["```mermaid\n",""]].map((e=>({label:"".concat(e[0]).concat(e[1]),type:"text",apply:jt(e[0],e[1],"","`"===e[0]?"`":"\n```","type")}))),{label:"[]()",type:"text"},{label:"![]()",type:"text"},{label:"| |",type:"text",detail:"table",apply:"| col | col | col |\n| - | - | - |\n| content | content | content |\n| content | content | content |"},{label:"$",type:"text",apply:jt("$","","","$","type")},{label:"$$",type:"text",apply:jt("$$","","\n","\n$$","title")},...["note","abstract","info","tip","success","question","warning","failure","danger","bug","example","quote","hint","caution","error","attention"].map((e=>({label:"!!! ".concat(e),type:"text",apply:jt("!!!"," ".concat(e)," Title","\n\n!!!","title")})))]}};return(0,f.yU)({override:e?[t,...e]:[t]})},Ct=e=>{const{tabWidth:t,editorId:o,theme:n}=(0,i.useContext)(Bt),s=(0,i.useRef)(null),m=(0,i.useRef)(),[p]=(0,i.useState)((()=>({language:new h.xx,theme:new h.xx,autocompletion:new h.xx,update:new h.xx,domEvent:new h.xx,history:new h.xx}))),[f]=(0,i.useState)((()=>((e,t)=>[{key:"Ctrl-b",mac:"Cmd-b",run:()=>(l.b.emit(e,l.h,"bold"),!0)},{key:"Ctrl-d",mac:"Cmd-d",run:u.SA,preventDefault:!0},{key:"Ctrl-s",mac:"Cmd-s",run:t=>(l.b.emit(e,l.O,t.state.doc.toString()),!0),shift:()=>(l.b.emit(e,l.h,"strikeThrough"),!0)},{key:"Ctrl-u",mac:"Cmd-u",run:()=>(l.b.emit(e,l.h,"underline"),!0),shift:()=>(l.b.emit(e,l.h,"unorderedList"),!0)},{key:"Ctrl-i",mac:"Cmd-i",run:()=>(l.b.emit(e,l.h,"italic"),!0),shift:()=>(l.b.emit(e,l.l,"image"),!0)},{key:"Ctrl-1",mac:"Cmd-1",run:()=>(l.b.emit(e,l.h,"h1"),!0)},{key:"Ctrl-2",mac:"Cmd-2",run:()=>(l.b.emit(e,l.h,"h2"),!0)},{key:"Ctrl-3",mac:"Cmd-3",run:()=>(l.b.emit(e,l.h,"h3"),!0)},{key:"Ctrl-4",mac:"Cmd-4",run:()=>(l.b.emit(e,l.h,"h4"),!0)},{key:"Ctrl-5",mac:"Cmd-5",run:()=>(l.b.emit(e,l.h,"h5"),!0)},{key:"Ctrl-6",mac:"Cmd-6",run:()=>(l.b.emit(e,l.h,"h6"),!0)},{key:"Ctrl-ArrowUp",mac:"Cmd-ArrowUp",run:()=>(l.b.emit(e,l.h,"sup"),!0)},{key:"Ctrl-ArrowDown",mac:"Cmd-ArrowDown",run:()=>(l.b.emit(e,l.h,"sub"),!0)},{key:"Ctrl-o",mac:"Cmd-o",run:()=>(l.b.emit(e,l.h,"orderedList"),!0)},{key:"Ctrl-c",mac:"Cmd-c",shift:()=>(l.b.emit(e,l.h,"code"),!0),any:(t,o)=>!(!o.ctrlKey&&!o.metaKey||!o.altKey||"KeyC"!==o.code)&&(l.b.emit(e,l.h,"codeRow"),!0)},{key:"Ctrl-l",mac:"Cmd-l",run:()=>(l.b.emit(e,l.l,"link"),!0)},{key:"Ctrl-f",mac:"Cmd-f",shift:()=>!t.noPrettier&&(l.b.emit(e,l.h,"prettier"),!0)},{any:(t,o)=>!(!o.ctrlKey&&!o.metaKey||!o.altKey||!o.shiftKey||"KeyT"!==o.code)&&(l.b.emit(e,l.h,"table"),!0)},...g.Eo])(o,e))),v=(0,i.useRef)(!0),b=((e,t)=>{const{editorId:o}=(0,i.useContext)(Bt),n=(0,i.useCallback)((e=>{e instanceof Promise?e.then((e=>{l.b.emit(o,l.h,"universal",{generate:()=>({targetValue:e})})})).catch((e=>{console.error(e)})):l.b.emit(o,l.h,"universal",{generate:()=>({targetValue:e})})}),[o]);return(0,i.useCallback)((i=>{var a,s,r;if(!i.clipboardData)return;if(i.clipboardData.files.length>0){const{files:e}=i.clipboardData;return l.b.emit(o,l.U,Array.from(e).filter((e=>/image\/.*/.test(e.type)))),void i.preventDefault()}const c=i.clipboardData.getData("text/plain"),d=(null==(a=t.current)?void 0:a.view.state.selection.main.to)||0,h=(null==(s=t.current)?void 0:s.view.state.doc.lineAt(d).from)||0,u=(null==(r=t.current)?void 0:r.view.state.doc.sliceString(h,d))||"",m=/!\[.*\]\(\s*$/.test(u),p=/!\[.*\]\((.*)\s?.*\)/.test(c);if(m){const t=e.transformImgUrl(c);return n(t),void i.preventDefault()}if(p){const t=c.match(new RegExp("(?<=!\\[.*\\]\\()([^)\\s]+)(?=\\s?[\"']?.*[\"']?\\))","g"));return t?Promise.all(t.map((t=>e.transformImgUrl(t)))).then((e=>{n(e.reduce(((e,o,n)=>e.replace(t[n],o)),c))})):n(c),void i.preventDefault()}if(e.autoDetectCode&&i.clipboardData.types.includes("vscode-editor-data")){const e=JSON.parse(i.clipboardData.getData("vscode-editor-data"));return l.b.emit(o,l.h,"code",{mode:e.mode,text:i.clipboardData.getData("text/plain")}),void i.preventDefault()}e.maxLength&&c.length+e.modelValue.length>e.maxLength&&l.b.emit(o,l.E,{name:"overlength",message:"The input text is too long",data:c})}),[t,o,n,e])})(e,m),[A,x]=(0,i.useState)({}),w=(0,i.useMemo)((()=>{const t={paste:b,blur:e.onBlur,focus:e.onFocus,drop:e.onDrop,input:t=>{e.onInput&&e.onInput(t);const{data:n}=t;e.maxLength&&e.modelValue.length+n.length>e.maxLength&&l.b.emit(o,l.E,{name:"overlength",message:"The input text is too long",data:n})}},n={...t},i=Object.keys(t);for(const e in A){const o=e;i.includes(o)?n[o]=(e,n)=>{A[o](e,n),e.defaultPrevented||t[o](e,n)}:n[o]=A[o]}return n}),[A,o,b,e]),[j]=(0,i.useState)((()=>[r.w4.of([...u.pw,...u.cL,...f,u.Yc]),p.history.of((0,u.b6)()),p.language.of((0,d.markdown)({codeLanguages:c.e})),r.Lz.lineWrapping,p.update.of(r.Lz.updateListener.of((t=>{t.docChanged&&e.onChange(t.state.doc.toString())}))),p.domEvent.of(r.Lz.domEventHandlers(w))])),[k]=(0,i.useState)((()=>a.h.codeMirrorExtensions(n,[...j,p.theme.of("light"===n?wt:ht),p.autocompletion.of(yt(e.completions))],[...f]))),y=(0,i.useCallback)((()=>{var e,t;null==(e=m.current)||e.view.dispatch({effects:p.history.reconfigure([])}),null==(t=m.current)||t.view.dispatch({effects:p.history.reconfigure((0,u.b6)())})}),[p.history]);return(0,i.useEffect)((()=>{const n=new r.Lz({doc:e.modelValue,parent:s.current,extensions:k}),i=new tt(n);m.current=i,setTimeout((()=>{i.setTabSize(t),i.setDisabled(e.disabled),i.setReadOnly(e.readOnly),e.placeholder&&i.setPlaceholder(e.placeholder),"number"==typeof e.maxLength&&i.setMaxLength(e.maxLength),e.autoFocus&&n.focus(),v.current=!1}),0);const a=()=>(0,u.tN)(n),c=()=>(0,u.ZS)(n),d=e=>{x(e)};return l.b.on(o,{name:l.n,callback:a}),l.b.on(o,{name:l.m,callback:c}),l.b.on(o,{name:l.i,callback:d}),()=>{n.destroy(),l.b.remove(o,l.n,a),l.b.remove(o,l.m,c),l.b.remove(o,l.i,d),v.current=!0}}),[]),(0,i.useEffect)((()=>{const t=function(t){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};var i,l;if("image"===t&&n.transform){const l=e.transformImgUrl(n.url);if(l instanceof Promise)l.then((e=>{var i;const{text:l,options:a}=Qe(t,m.current,{...n,url:e});null==(i=m.current)||i.replaceSelectedText(l,a,o)})).catch((e=>{console.error(e)}));else{const{text:e,options:a}=Qe(t,m.current,{...n,url:l});null==(i=m.current)||i.replaceSelectedText(e,a,o)}}else{const{text:e,options:i}=Qe(t,m.current,n);null==(l=m.current)||l.replaceSelectedText(e,i,o)}};return l.b.on(o,{name:l.h,callback:t}),()=>{l.b.remove(o,l.h,t)}}),[o,e]),(0,i.useEffect)((()=>{setTimeout((()=>{var e;null==(e=m.current)||e.view.dispatch({effects:p.theme.reconfigure("light"===n?wt:ht)})}),0)}),[p.theme,n]),(0,i.useEffect)((()=>{setTimeout((()=>{var t;null==(t=m.current)||t.view.dispatch({effects:[p.update.reconfigure(r.Lz.updateListener.of((t=>{t.docChanged&&e.onChange(t.state.doc.toString())}))),p.domEvent.reconfigure(r.Lz.domEventHandlers(w)),p.autocompletion.reconfigure(yt(e.completions))]})}),0)}),[p.autocompletion,p.domEvent,p.update,w,e]),(0,i.useEffect)((()=>{var t,o;(null==(t=m.current)?void 0:t.getValue())!==e.modelValue&&(null==(o=m.current)||o.setValue(e.modelValue))}),[e.modelValue]),(0,i.useEffect)((()=>{var e;v.current||null==(e=m.current)||e.setTabSize(t)}),[t]),(0,i.useEffect)((()=>{var t;v.current||null==(t=m.current)||t.setPlaceholder(e.placeholder)}),[e.placeholder]),(0,i.useEffect)((()=>{var t;v.current||null==(t=m.current)||t.setDisabled(e.disabled)}),[e.disabled]),(0,i.useEffect)((()=>{var t;v.current||null==(t=m.current)||t.setDisabled(e.readOnly)}),[e.readOnly]),(0,i.useEffect)((()=>{var t;v.current||"number"==typeof e.maxLength&&(null==(t=m.current)||t.setMaxLength(e.maxLength))}),[e.maxLength]),{inputWrapperRef:s,codeMirrorUt:m,resetHistory:y}},Tt=e=>{const{highlight:t}=(0,i.useContext)(Bt),o=(0,i.useRef)(a.h.editorExtensions.highlight.instance),[n,l]=(0,i.useState)(!!o.current);return(0,i.useEffect)((()=>{((e,t)=>{const o=document.getElementById(t.id);null==o||o.remove(),Me(e,t)})("link",{...t.css,rel:"stylesheet",id:"".concat(a.p,"-hlCss")})}),[t.css]),(0,i.useEffect)((()=>{e.noHighlight||o.current||(Me("link",{...t.css,rel:"stylesheet",id:"".concat(a.p,"-hlCss")}),Me("script",{...t.js,id:"".concat(a.p,"-hljs"),onload(){o.current=window.hljs,l(!0)}},"hljs"))}),[]),{hljsRef:o,hljsInited:n}},St=(e,t)=>{const o=e.renderer.rules.fence.bind(e.renderer.rules);e.renderer.rules.fence=(e,n,i,l,s)=>{const r=e[n],c=r.content.trim();if("mermaid"===r.info){let o;return e[n].map&&0===e[n].level&&(o=e[n].map[0],e[n].attrSet("data-line",String(o))),'<div class="'.concat(a.p,'-mermaid" ').concat(void 0!==o?"data-line="+o:""," data-mermaid-theme=").concat(t.themeRef.current,">").concat(c,"</div>")}return o(e,n,i,l,s)}},Et=(e,t)=>{let o=!0,n=!0;const i=e.posMax,l=t>0?e.src.charCodeAt(t-1):-1,a=t+1<=i?e.src.charCodeAt(t+1):-1;return(32===l||9===l||a>=48&&a<=57)&&(n=!1),(32===a||9===a)&&(o=!1),{can_open:o,can_close:n}},_t=(e,t)=>{let o,n,i,l;if("$"!==e.src[e.pos])return!1;if(i=Et(e,e.pos),!i.can_open)return t||(e.pending+="$"),e.pos+=1,!0;const a=e.pos+1;for(o=a;-1!==(o=e.src.indexOf("$",o));){for(l=o-1;"\\"===e.src[l];)l-=1;if((o-l)%2==1)break;o+=1}return-1===o?(t||(e.pending+="$"),e.pos=a,!0):o-a===0?(t||(e.pending+="$$"),e.pos=a+1,!0):(i=Et(e,o),i.can_close?(t||(n=e.push("math_inline","math",0),n.markup="$",n.content=e.src.slice(a,o)),e.pos=o+1,!0):(t||(e.pending+="$"),e.pos=a,!0))},Nt=(e,t,o,n)=>{let i,l,a,s,r=!1,c=e.bMarks[t]+e.tShift[t],d=e.eMarks[t];if(c+2>d||"$$"!==e.src.slice(c,c+2))return!1;if(c+=2,i=e.src.slice(c,d),n)return!0;for("$$"===i.trim().slice(-2)&&(i=i.trim().slice(0,-2),r=!0),a=t;!r&&(a++,!(a>=o||(c=e.bMarks[a]+e.tShift[a],d=e.eMarks[a],c<d&&e.tShift[a]<e.blkIndent)));)"$$"===e.src.slice(c,d).trim().slice(-2)&&(s=e.src.slice(0,d).lastIndexOf("$$"),l=e.src.slice(c,s),r=!0);e.line=a+1;const h=e.push("math_block","math",0);return h.block=!0,h.content=(i&&i.trim()?i+"\n":"")+e.getLines(t+1,a,e.tShift[t],!0)+(l&&l.trim()?l:""),h.map=[t,e.line],h.markup="$$",!0},Mt=(e,t)=>{e.inline.ruler.after("escape","math_inline",_t),e.block.ruler.after("blockquote","math_block",Nt,{alt:["paragraph","reference","blockquote","list"]}),e.renderer.rules.math_inline=(e,o)=>(e=>{if(t.katexRef.current){const o=t.katexRef.current.renderToString(e,{throwOnError:!1});return'<span class="'.concat(a.p,'-katex-inline" data-processed>').concat(o,"</span>")}return'<span class="'.concat(a.p,'-katex-inline">').concat(e,"</span>")})(e[o].content),e.renderer.rules.math_block=(e,o)=>((e,o)=>{if(t.katexRef.current){const n=t.katexRef.current.renderToString(e,{throwOnError:!1,displayMode:!0});return'<p class="'.concat(a.p,'-katex-block" data-line=').concat(o," data-processed>").concat(n,"</p>")}return'<p class="'.concat(a.p,'-katex-block" data-line=').concat(o,">").concat(e,"</p>")})(e[o].content,e[o].map[0])+"\n"},Ft=(e,t)=>{const o=(t=t||{}).marker||"!",n=o.charCodeAt(0),i=o.length;let l="",s="";const r=(e,t,o,n,i)=>{const l=e[t];return"admonition_open"===l.type?(e[t].attrPush(["class","".concat(a.p,"-admonition ").concat(a.p,"-admonition-").concat(l.info)]),e[t].attrSet("data-line",String(e[t].map[0]))):"admonition_title_open"===l.type&&e[t].attrPush(["class","".concat(a.p,"-admonition-title")]),i.renderToken(e,t,o)};e.block.ruler.before("code","admonition",((e,t,a,r)=>{let c,d,h,u=!1,m=e.bMarks[t]+e.tShift[t],p=e.eMarks[t];if(n!==e.src.charCodeAt(m))return!1;for(c=m+1;c<=p&&o[(c-m)%i]===e.src[c];c++);const f=Math.floor((c-m)/i);if(3!==f)return!1;c-=(c-m)%i;const g=e.src.slice(m,c);if((e=>{const t=e.trim().split(" ",2);s="",l=t[0],t.length>1&&(s=e.substring(l.length+2)),(""===s||!s)&&(s=l)})(e.src.slice(c,p)),r)return!0;for(d=t;d++,!(d>=a||(m=e.bMarks[d]+e.tShift[d],p=e.eMarks[d],m<p&&e.sCount[d]<e.blkIndent));)if(n===e.src.charCodeAt(m)&&!(e.sCount[d]-e.blkIndent>=4)){for(c=m+1;c<=p&&o[(c-m)%i]===e.src[c];c++);if(!(Math.floor((c-m)/i)<f)&&(c-=(c-m)%i,c=e.skipSpaces(c),!(c<p))){u=!0;break}}const v=e.parentType,b=e.lineMax;return e.parentType="root",e.lineMax=d,h=e.push("admonition_open","div",1),h.markup=g,h.block=!0,h.info=l,h.map=[t,d],h=e.push("admonition_title_open","p",1),h.markup=g+" "+l,h.map=[t,d],h=e.push("inline","",0),h.content=s,h.map=[t,e.line-1],h.children=[],h=e.push("admonition_title_close","p",-1),h.markup=g+" "+l,e.md.block.tokenize(e,t+1,d),h=e.push("admonition_close","div",-1),h.markup=e.src.slice(m,c),h.block=!0,e.parentType=v,e.lineMax=b,e.line=d+(u?1:0),!0}),{alt:["paragraph","reference","blockquote","list"]}),e.renderer.rules.admonition_open=r,e.renderer.rules.admonition_title_open=r,e.renderer.rules.admonition_title_close=r,e.renderer.rules.admonition_close=r},It=(e,t)=>{e.renderer.rules.heading_open=(o,n)=>{var i;const l=o[n],a=(null==(i=o[n+1].children)?void 0:i.reduce(((e,t)=>e+(t.content||"")),""))||"",s=l.markup.length;return t.headsRef.current.push({text:a,level:s}),l.map&&0===l.level&&(l.attrSet("data-line",String(l.map[0])),l.attrSet("id",t.mdHeadingId(a,s,t.headsRef.current.length))),e.renderer.renderToken(o,n,t)},e.renderer.rules.heading_close=(e,t,o,n,i)=>i.renderToken(e,t,o)},Lt=(e,t)=>{const o=e.renderer.rules.fence,n=e.utils.unescapeAll,i=/\[(\w*)(?::([\w ]*))?\]/;function l(e){return e.info?n(e.info).trim():""}function s(e){const t=l(e),[o=null,n=""]=(i.exec(t)||[]).slice(1);return[o,n]}function r(e){const t=l(e);return t?t.split(/(\s+)/g)[0]:""}e.renderer.rules.fence=(e,n,l,c,d)=>{var h,u;if(e[n].hidden)return"";const[m]=s(e[n]);if(null===m){const i=e[n].content.trim().split("\n").length<t.autoFoldThreshold,s=t.codeFoldable?"details":"div",r=t.codeFoldable?"summary":"div",u=o(e,n,l,c,d);return"<".concat(s,' class="').concat(a.p,'-code"').concat(i?" open":"",">\n    <").concat(r,' class="').concat(a.p,'-code-head">\n      <div class="').concat(a.p,'-code-flag">\n        <span></span>\n        <span></span>\n        <span></span>\n      </div>\n      <div>\n        <span class="').concat(a.p,'-code-lang">').concat(e[n].info.trim(),'</span>\n        <span class="').concat(a.p,'-copy-button">').concat(null==(h=t.usedLanguageTextRef.current)?void 0:h.copyCode.text,"</span>\n      </div>\n    </").concat(r,">").concat(u,"</").concat(s,">")}let p,f,g,v,b="",A="",x="";const w=e[n].content.trim().split("\n").length<t.autoFoldThreshold,j=t.codeFoldable?"details":"div",k=t.codeFoldable?"summary":"div";for(let y=n;y<e.length&&(p=e[y],[f,g]=s(p),f===m);y++){p.info=p.info.replace(i,""),p.hidden=!0;const s="".concat(a.p,"-codetab-").concat(t.editorId,"-").concat(n,"-").concat(y-n);v=y-n>0?"":"checked",b+='<li>\n          <input type="radio" name="'.concat(a.p,"-codetab-label-").concat(t.editorId,"-").concat(n,'" class="').concat(s,'" ').concat(v,">\n          <label onclick=\"document.querySelectorAll('.").concat(s,"').forEach(e => e.click())\">").concat(g||r(p),"</label>\n        </li>"),A+='<input type="radio" name="'.concat(a.p,"-codetab-pre-").concat(t.editorId,"-").concat(n,'" class="').concat(s,'" ').concat(v,">\n      ").concat(o(e,y,l,c,d)),x+='<input type="radio" name="'.concat(a.p,"-codetab-lang-").concat(t.editorId,"-").concat(n,'" class="').concat(s,'" ').concat(v,">\n      <span class=").concat(a.p,"-code-lang>").concat(r(p),"</span>")}return"<".concat(j,' class="').concat(a.p,'-code" ').concat(w?" open":"",">\n    <").concat(k,' class="').concat(a.p,'-code-head">\n      <div class="').concat(a.p,'-code-flag">\n        <ul class="').concat(a.p,'-codetab-label">').concat(b,'</ul>\n      </div>\n      <div>\n        <span class="').concat(a.p,'-codetab-lang">').concat(x,'</span>\n        <span class="').concat(a.p,'-copy-button">').concat(null==(u=t.usedLanguageTextRef.current)?void 0:u.copyCode.text,"</span>\n      </div>\n    </").concat(k,">").concat(A,"</").concat(j,">")}},Ot=(e,t)=>{const{onHtmlChanged:o=(()=>{}),onGetCatalog:n=(()=>{})}=e,{editorConfig:r,markdownItConfig:c,markdownItPlugins:d}=a.h,{editorId:h,showCodeRowNumber:u,theme:m,usedLanguageText:p}=(0,i.useContext)(Bt),f=(0,i.useRef)([]),g=(0,i.useRef)(m);(0,i.useEffect)((()=>{g.current=m}),[m]);const v=(0,i.useRef)(p);(0,i.useEffect)((()=>{v.current=p}),[p]);const{hljsRef:b,hljsInited:k}=Tt(e),{katexRef:y,katexInited:C}=(e=>{const t=(0,i.useRef)(a.h.editorExtensions.katex.instance),[o,n]=(0,i.useState)(!!t.current);return(0,i.useEffect)((()=>{if(e.noKatex||t.current)return;const{editorExtensions:o}=a.h;Me("script",{src:o.katex.js,id:"".concat(a.p,"-katex"),onload(){t.current=window.katex,n(!0)}},"katex"),Me("link",{rel:"stylesheet",href:o.katex.css,id:"".concat(a.p,"-katexCss")})}),[]),{katexRef:t,katexInited:o}})(e),{reRender:T,replaceMermaid:S}=(e=>{const{theme:t}=(0,i.useContext)(Bt),o=(0,i.useRef)(a.h.editorExtensions.mermaid.instance),[n,l]=(0,i.useState)(-1),[r]=(0,i.useState)((()=>new ve({max:1e3,ttl:6e5}))),c=(0,i.useCallback)((()=>{r.clear();const n=o.current;!e.noMermaid&&n&&(n.initialize(a.h.mermaidConfig({startOnLoad:!1,theme:"dark"===t?"dark":"default"})),l((e=>e+1)))}),[t]);(0,i.useEffect)(c,[c]),(0,i.useEffect)((()=>{var t,n;const{editorExtensions:i,editorExtensionsAttrs:l}=a.h;if(e.noMermaid||o.current)return;const s=i.mermaid.js;/\.mjs/.test(s)?(Me("link",{...null==(t=l.mermaid)?void 0:t.js,rel:"modulepreload",href:s,id:"".concat(a.p,"-mermaid-m")}),import(s).then((e=>{o.current=e.default,c()}))):Me("script",{...null==(n=l.mermaid)?void 0:n.js,src:s,id:"".concat(a.p,"-mermaid"),onload(){o.current=window.mermaid,c()}},"mermaid")}),[]);const d=(0,i.useCallback)((()=>{if(!e.noMermaid&&o.current){const t=document.querySelectorAll("div.".concat(a.p,"-mermaid")),n=document.createElement("div");n.style.width=document.body.offsetWidth+"px",n.style.height=document.body.offsetHeight+"px",n.style.position="fixed",n.style.zIndex="-10000",n.style.top="-10000";let i=t.length;i>0&&document.body.appendChild(n),t.forEach((async t=>{let l=r.get(t.innerText);if(!l){const i=(0,s.uR)(),a=o.current.renderAsync||o.current.render;let c="";try{c=await a(i,t.innerText,n)}catch{}l=await e.sanitizeMermaid("string"==typeof c?c:c.svg),r.set(t.innerText,l)}const c=document.createElement("p");c.className="".concat(a.p,"-mermaid"),c.setAttribute("data-processed",""),c.innerHTML=l,void 0!==t.dataset.line&&(c.dataset.line=t.dataset.line),t.replaceWith(c),0===--i&&n.remove()}))}}),[]);return{mermaidRef:o,reRender:n,replaceMermaid:d}})(e),[E]=(0,i.useState)((()=>{const t=(0,A.A)({html:!0,breaks:!0});c(t,{editorId:h});const o=[{type:"image",plugin:x.A,options:{figcaption:!0,classes:"md-zoom"}},{type:"admonition",plugin:Ft,options:{}},{type:"taskList",plugin:w,options:{}},{type:"heading",plugin:It,options:{mdHeadingId:e.mdHeadingId,headsRef:f}},{type:"code",plugin:Lt,options:{editorId:h,usedLanguageTextRef:v,codeFoldable:e.codeFoldable,autoFoldThreshold:e.autoFoldThreshold}},{type:"xss",plugin:j,options:{xss:e=>({whiteList:Object.assign({},e.getDefaultWhiteList(),{input:["class","disabled","type","checked"],iframe:["class","width","height","src","title","border","frameborder","framespacing","allow","allowfullscreen"]})})}}];e.noKatex||o.push({type:"katex",plugin:Mt,options:{katexRef:y}}),e.noMermaid||o.push({type:"mermaid",plugin:St,options:{themeRef:g}}),d(o,{editorId:h}).forEach((e=>{t.use(e.plugin,e.options)}));const n=t.options.highlight;return t.set({highlight:(t,o,i)=>{if(n){const e=n(t,o,i);if(e)return e}let s;s=!e.noHighlight&&b.current?b.current.getLanguage(o)?b.current.highlight(t,{language:o,ignoreIllegals:!0}).value:b.current.highlightAuto(t).value:E.utils.escapeHtml(t);const r=u?(0,l.o)(s.replace(/^\n+|\n+$/g,"")):'<span class="'.concat(a.p,'-code-block">').concat(s.replace(/^\n+|\n+$/g,""),"</span>");return'<pre><code class="language-'.concat(o,'" language=').concat(o,">").concat(r,"</code></pre>")}}),(e=>{["paragraph_open","table_open","ordered_list_open","bullet_list_open","blockquote_open","hr","html_block","fence"].forEach((t=>{const o=e.renderer.rules[t];e.renderer.rules[t]=o?(e,t,n,i,l)=>{let a;const s=o(e,t,n,i,l);return e[t].map&&0===e[t].level&&!/^<!--/.test(s)?(a=e[t].map[0],s.replace(/^(<[^>]*)/,'$1 data-line="'.concat(a,'"'))):s}:(e,t,o,n,i)=>{let l;return e[t].map&&0===e[t].level&&(l=e[t].map[0],e[t].attrSet("data-line",String(l))),i.renderToken(e,t,o)}}))})(t),t})),[_,N]=(0,i.useState)("_article-key_".concat((0,s.uR)())),[M,F]=(0,i.useState)((()=>e.sanitize(E.render(e.modelValue)))),I=(0,i.useMemo)((()=>(e.noHighlight||k)&&(e.noKatex||C)),[k,C]),L=(0,i.useRef)(!0),O=(0,i.useCallback)((()=>{f.current=[];const t=e.sanitize(E.render(e.modelValue));F(t)}),[E,e]);return(0,i.useEffect)((()=>{l.b.emit(h,l.B,M),o(M),n(f.current),l.b.emit(h,l.p,f.current)}),[M,_]),(0,i.useEffect)((()=>{e.setting.preview&&l.b.emit(h,l.p,f.current)}),[e.setting.preview]),(0,i.useEffect)((()=>{if(L.current)return void(L.current=!1);const e=setTimeout((()=>{O()}),t?0:r.renderDelay);return()=>{clearTimeout(e)}}),[I,m,O]),(0,i.useEffect)((()=>{S()}),[M,T]),(0,i.useEffect)((()=>{l.b.on(h,{name:l.q,callback(){l.b.emit(h,l.p,f.current)}})}),[]),(0,i.useEffect)((()=>{const e=()=>{O(),N("_article-key_".concat((0,s.uR)()))};return l.b.on(h,{name:l.R,callback:e}),()=>{l.b.remove(h,l.R,e)}}),[O]),{html:M,key:_}},Rt=e=>{const{previewOnly:t=!1}=e,{editorId:o,previewTheme:s,showCodeRowNumber:r}=(0,i.useContext)(Bt),{html:c,key:d}=Ot(e,!!t);((e,t,o)=>{const{editorId:n,usedLanguageText:l,customIcon:s}=(0,i.useContext)(Bt),{formatCopiedText:r=(e=>e)}=e;(0,i.useEffect)((()=>{e.setting.preview&&document.querySelectorAll("#".concat(n," .").concat(a.p,"-preview .").concat(a.p,"-code")).forEach((e=>{let t=-1;const o=e.querySelector(".".concat(a.p,"-copy-button"));o&&(o.onclick=n=>{n.preventDefault(),clearTimeout(t);const i=(e.querySelector("input:checked + pre code")||e.querySelector("pre code")).textContent,a=b(r(i)),{text:s,successTips:c,failTips:d}=l.copyCode;o.innerHTML=a?c:d,t=window.setTimeout((()=>{o.innerHTML=s}),1500)})}))}),[s,r,t,o,e.setting.preview,l.copyCode])})(e,c,d),((e,t)=>{const{editorId:o}=(0,i.useContext)(Bt);(0,i.useEffect)((()=>e.noImgZoomIn?void 0:(()=>{const e=document.querySelectorAll("#".concat(o,"-preview img")),t=(0,v.A)(e,{background:"#00000073"});return()=>{t.detach()}})()),[t,e.setting])})(e,c);const h=(0,i.useMemo)((()=>n.j.jsx("div",{id:"".concat(o,"-preview"),className:(0,l.c)(["".concat(a.p,"-preview"),"".concat(s,"-theme"),r&&"".concat(a.p,"-scrn")]),dangerouslySetInnerHTML:{__html:c}},d)),[o,c,d,s,r]);return n.j.jsxs(n.j.Fragment,{children:[e.setting.preview&&n.j.jsx("div",{id:"".concat(o,"-preview-wrapper"),className:"".concat(a.p,"-preview-wrapper"),children:h},"content-preview-wrapper"),!t&&e.setting.htmlPreview&&n.j.jsx("div",{id:"".concat(o,"-html-wrapper"),className:"".concat(a.p,"-preview-wrapper"),children:n.j.jsx("div",{className:"".concat(a.p,"-html"),children:c})},"html-preview-wrapper")]})},Ht=(0,i.forwardRef)(((e,t)=>{const{editorId:o}=(0,i.useContext)(Bt),[s,r]=(0,i.useState)(""),c=(0,i.useRef)(null),d=(0,i.useRef)(null),{inputWrapperRef:h,codeMirrorUt:u,resetHistory:m}=Ct(e),{inputWrapperStyle:p,resizeOperateStyle:f}=((e,t,o)=>{const[n,l]=(0,i.useState)({width:e.inputBoxWitdh}),[s,r]=(0,i.useState)({left:e.inputBoxWitdh}),c=(0,i.useRef)(e.inputBoxWitdh);return(0,i.useEffect)((()=>{var n,i,s,d;const h=(null==(n=t.current)?void 0:n.offsetWidth)||0,u=(null==(i=t.current)?void 0:i.getBoundingClientRect().x)||0,m=t=>{var o;let n=t.x-u;n<a.M?n=a.M:n>h-a.M&&(n=h-a.M);const i="".concat(n,"px");l((e=>({...e,width:i}))),r((e=>({...e,left:i}))),c.current=i,null==(o=e.onInputBoxWitdhChange)||o.call(e,i)},p=()=>{r((e=>({...e}))),document.addEventListener("mousemove",m)},f=()=>{r((e=>({...e}))),document.removeEventListener("mousemove",m)};return null==(s=o.current)||s.addEventListener("mousedown",p),null==(d=o.current)||d.addEventListener("mouseup",f),()=>{var e,t;null==(e=o.current)||e.removeEventListener("mousedown",p),null==(t=o.current)||t.removeEventListener("mouseup",f)}}),[t,e,o]),(0,i.useEffect)((()=>{e.inputBoxWitdh&&(l((t=>({...t,width:e.inputBoxWitdh}))),r((t=>({...t,left:e.inputBoxWitdh}))))}),[e.inputBoxWitdh]),(0,i.useEffect)((()=>{const t=e.setting.previewOnly;let o="",n="";t?(o="0%",n="none"):e.setting.htmlPreview||e.setting.preview?(o=c.current,n="initial"):(o="100%",n="none"),l((e=>({...e,width:o}))),r((e=>({...e,display:n})))}),[e.setting.htmlPreview,e.setting.preview,e.setting.previewOnly]),{inputWrapperStyle:n,resizeOperateStyle:s}})(e,c,d);return((e,t,o)=>{const{editorId:n}=(0,i.useContext)(Bt),[l,a]=(0,i.useState)({clear(){},init(){}});(0,i.useEffect)((()=>{l.clear();const e=document.querySelector("#".concat(n," .cm-scroller")),t=document.querySelector('[id="'.concat(n,'-preview-wrapper"]')),i=document.querySelector('[id="'.concat(n,'-html-wrapper"]'));if(t||i){const n=t?Je:Xe,l=t||i,[s,r]=n(e,l,o.current);a({init:s,clear:r})}}),[t,e.setting.fullscreen,e.setting.pageFullscreen,e.setting.preview,e.setting.htmlPreview]),(0,i.useEffect)((()=>(e.scrollAuto&&!e.setting.previewOnly&&(e.setting.preview||e.setting.htmlPreview)?l.init():l.clear(),()=>{l.clear()})),[l,e.scrollAuto,e.setting.preview,e.setting.htmlPreview,e.setting.previewOnly])})(e,s,u),(0,i.useImperativeHandle)(t,(()=>({getSelectedText(){var e;return null==(e=u.current)?void 0:e.getSelectedText()},focus(e){var t;null==(t=u.current)||t.focus(e)},resetHistory:m})),[u,m]),n.j.jsxs("div",{className:"".concat(a.p,"-content").concat(e.setting.htmlPreview||e.setting.preview?" has-preview":""),ref:c,children:[n.j.jsx("div",{className:"".concat(a.p,"-input-wrapper"),style:p,ref:h}),(e.setting.htmlPreview||e.setting.preview)&&n.j.jsx("div",{className:"".concat(a.p,"-resize-operate"),style:f,ref:d}),n.j.jsx(Rt,{modelValue:e.modelValue,setting:e.setting,onHtmlChanged:t=>{r(t),e.onHtmlChanged&&e.onHtmlChanged(t)},onGetCatalog:e.onGetCatalog,mdHeadingId:e.mdHeadingId,noMermaid:e.noMermaid,sanitize:e.sanitize,noKatex:e.noKatex,formatCopiedText:e.formatCopiedText,noHighlight:e.noHighlight,noImgZoomIn:e.noImgZoomIn,sanitizeMermaid:e.sanitizeMermaid,codeFoldable:e.codeFoldable,autoFoldThreshold:e.autoFoldThreshold},"display-editor"),e.catalogVisible&&n.j.jsx(l.M,{theme:e.theme,className:"".concat(a.p,"-catalog-editor"),editorId:o,mdHeadingId:e.mdHeadingId},"internal-catalog")]})})),Wt=i.memo(Ht),zt=e=>{let{modelValue:t}=e;const{usedLanguageText:o}=(0,i.useContext)(Bt);return(0,i.useMemo)((()=>{var e;return n.j.jsxs("div",{className:"".concat(a.p,"-footer-item"),children:[n.j.jsx("label",{className:"".concat(a.p,"-footer-label"),children:"".concat(null==(e=o.footer)?void 0:e.markdownTotal,":")}),n.j.jsx("span",{children:t.length||0})]})}),[o,t])},Dt=e=>n.j.jsx("div",{className:(0,l.c)(["".concat(a.p,"-checkbox"),e.checked&&"".concat(a.p,"-checkbox-checked")]),onClick:()=>{e.onChange(!e.checked)}}),Pt=e=>{var t;const{usedLanguageText:o}=(0,i.useContext)(Bt);return(0,i.useMemo)((()=>{var t;return n.j.jsxs("div",{className:"".concat(a.p,"-footer-item"),children:[n.j.jsx("label",{className:"".concat(a.p,"-footer-label"),onClick:()=>{e.onScrollAutoChange(!e.scrollAuto)},children:null==(t=o.footer)?void 0:t.scrollAuto}),n.j.jsx(Dt,{checked:e.scrollAuto,onChange:e.onScrollAutoChange})]})}),[null==(t=o.footer)?void 0:t.scrollAuto,e])},Vt=i.memo((e=>{const t=(0,i.useCallback)((t=>{if(!a.d.includes(t))return e.defFooters[t]||"";switch(t){case"markdownTotal":return n.j.jsx(zt,{modelValue:e.modelValue},"markdown-total");case"scrollSwitch":return n.j.jsx(Pt,{scrollAuto:e.scrollAuto,onScrollAutoChange:e.onScrollAutoChange},"scroll-auto")}}),[e.modelValue,e.scrollAuto,e.onScrollAutoChange,e.defFooters]),[o,l]=(0,i.useMemo)((()=>{const o=e.footers.indexOf("="),n=-1===o?e.footers:e.footers.slice(0,o),i=-1===o?[]:e.footers.slice(o,Number.MAX_SAFE_INTEGER);return[n.map((e=>t(e))),i.map((e=>t(e)))]}),[e.footers,t]);return n.j.jsxs("div",{className:"".concat(a.p,"-footer"),children:[n.j.jsx("div",{className:"".concat(a.p,"-footer-left"),children:o}),n.j.jsx("div",{className:"".concat(a.p,"-footer-right"),children:l})]})})),Bt=(0,i.createContext)({editorId:"",tabWidth:2,theme:"light",language:"zh-CN",highlight:{css:"",js:""},showCodeRowNumber:!1,usedLanguageText:a.s["zh-CN"],previewTheme:"default",customIcon:{}}),Ut=(0,i.forwardRef)(((e,t)=>{const{modelValue:o=a.f.modelValue,theme:s=a.f.theme,className:r=a.f.className,toolbars:c=a.f.toolbars,toolbarsExclude:d=a.f.toolbarsExclude,defToolbars:h=a.f.defToolbars,tabWidth:u=a.f.tabWidth,showCodeRowNumber:m=a.f.showCodeRowNumber,previewTheme:p=a.f.previewTheme,noPrettier:f=a.f.noPrettier,tableShape:g=a.f.tableShape,noMermaid:v=a.f.noMermaid,noKatex:b=a.f.noKatex,placeholder:A=a.f.placeholder,onChange:x=a.f.onChange,onHtmlChanged:w=a.f.onHtmlChanged,onGetCatalog:j=a.f.onGetCatalog,sanitize:k=a.f.sanitize,onError:y=a.f.onError,mdHeadingId:C=a.f.mdHeadingId,footers:T=a.f.footers,defFooters:S=a.f.defFooters,noIconfont:E=a.f.noIconfont,noUploadImg:_=a.f.noUploadImg,noHighlight:N=a.f.noHighlight,noImgZoomIn:M=a.f.noImgZoomIn,language:F=a.f.language,inputBoxWitdh:I=a.f.inputBoxWitdh,sanitizeMermaid:L=a.f.sanitizeMermaid,transformImgUrl:O=a.f.transformImgUrl,codeFoldable:R=a.f.codeFoldable,autoFoldThreshold:H=a.f.autoFoldThreshold}=e,[W]=(0,i.useState)((()=>({editorId:e.editorId||(0,l.g)(a.g+"_"),noKatex:b,noMermaid:v,noPrettier:f,noUploadImg:_,noIconfont:E,noHighlight:N}))),[z,D]=(0,i.useState)((()=>({scrollAuto:void 0===e.scrollAuto||e.scrollAuto}))),P=(0,i.useRef)(),V=(0,i.useCallback)((e=>{D((t=>({...t,scrollAuto:e})))}),[D]);((e,t)=>{const{modelValue:o}=e,{editorId:n}=t,[a,s]=(0,i.useState)({buildFinished:!1,html:""});(0,i.useEffect)((()=>{const e=e=>{s((()=>({buildFinished:!0,html:e})))};return l.b.on(n,{name:l.B,callback:e}),()=>{l.b.remove(n,l.B,e)}}),[]),(0,i.useEffect)((()=>{const t=()=>{if(e.onSave){const t=new Promise((e=>{if(a.buildFinished)e(a.html);else{const t=o=>{e(o),l.b.remove(n,l.B,t)};l.b.on(n,{name:l.B,callback:t})}}));e.onSave(e.modelValue,t)}};return l.b.on(n,{name:l.O,callback:t}),()=>{l.b.remove(n,l.O,t)}}),[o,e,a.buildFinished,a.html]),(0,i.useEffect)((()=>{s((e=>({...e,buildFinished:!1})))}),[o])})(e,W),(e=>{const{noPrettier:t,noUploadImg:o}=e;(0,i.useEffect)((()=>{const{editorExtensions:e,editorExtensionsAttrs:n}=a.h,i=t||!!e.prettier.prettierInstance,l=t||!!e.prettier.parserMarkdownInstance;if(!o&&!e.cropper.instance){const{js:t={},css:o={}}=n.cropper||{};Me("link",{...o,rel:"stylesheet",href:e.cropper.css,id:"".concat(a.p,"-cropperCss")}),Me("script",{...t,src:e.cropper.js,id:"".concat(a.p,"-cropper")})}if(!i){const{standaloneJs:t={}}=n.prettier||{};Me("script",{...t,src:e.prettier.standaloneJs,id:"".concat(a.p,"-prettier")})}if(!l){const{parserMarkdownJs:t={}}=n.prettier||{};Me("script",{...t,src:e.prettier.parserMarkdownJs,id:"".concat(a.p,"-prettierMD")})}}),[]),Ie(e)})(W),((e,t)=>{const{editorId:o}=t;(0,i.useEffect)((()=>{const t=(t,n)=>{e.onUploadImg&&e.onUploadImg(t,(e=>{l.b.emit(o,l.h,"image",{desc:"",urls:e}),n&&n()}))};return l.b.on(o,{name:l.U,callback:t}),()=>{l.b.remove(o,l.U,t)}}),[e.onUploadImg])})(e,W),((e,t)=>{(0,i.useEffect)((()=>(l.b.on(e,{name:l.E,callback:t}),()=>{l.b.remove(e,l.E,t)})),[t])})(W.editorId,y);const B=((e,t)=>{const{toolbars:o=a.b,toolbarsExclude:n=[]}=e,{editorId:s}=t,[r,c]=(0,i.useState)(!1);return(0,i.useEffect)((()=>{l.b.on(s,{name:l.C,callback:e=>{c(void 0===e?e=>!e:e)}})}),[]),(0,i.useMemo)((()=>!n.includes("catalog")&&o.includes("catalog")&&r),[r,o,n])})(e,W),[U,$,G,q]=Oe(e);return((e,t,o,n,a,s)=>{const{editorId:r}=t;(0,i.useEffect)((()=>{l.b.emit(r,l.P,n.pageFullscreen)}),[n.pageFullscreen]),(0,i.useEffect)((()=>{l.b.emit(r,l.F,n.fullscreen)}),[n.fullscreen]),(0,i.useEffect)((()=>{l.b.emit(r,l.a,n.preview)}),[n.preview]),(0,i.useEffect)((()=>{l.b.emit(r,l.d,n.previewOnly)}),[n.previewOnly]),(0,i.useEffect)((()=>{l.b.emit(r,l.H,n.htmlPreview)}),[n.htmlPreview]),(0,i.useEffect)((()=>{l.b.emit(r,l.e,o)}),[o]),(0,i.useImperativeHandle)(e,(()=>({on(e,t){switch(e){case"pageFullscreen":l.b.on(r,{name:l.P,callback(e){t(e)}});break;case"fullscreen":l.b.on(r,{name:l.F,callback(e){t(e)}});break;case"preview":l.b.on(r,{name:l.a,callback(e){t(e)}});break;case"previewOnly":l.b.on(r,{name:l.d,callback(e){t(e)}});break;case"htmlPreview":l.b.on(r,{name:l.H,callback(e){t(e)}});break;case"catalog":l.b.on(r,{name:l.e,callback(e){t(e)}})}},togglePageFullscreen(e){a("pageFullscreen",e)},toggleFullscreen(e){l.b.emit(r,l.f,e)},togglePreview(e){a("preview",e)},togglePreviewOnly(e){a("previewOnly",e)},toggleHtmlPreview(e){a("htmlPreview",e)},toggleCatalog(e){l.b.emit(r,l.C,e)},triggerSave(){l.b.emit(r,l.O)},insert(e){l.b.emit(r,l.h,"universal",{generate:e})},focus(e){var t;null==(t=s.current)||t.focus(e)},rerender(){l.b.emit(r,l.R)},getSelectedText(){var e;return null==(e=s.current)?void 0:e.getSelectedText()},resetHistory(){var e;null==(e=s.current)||e.resetHistory()},domEventHandlers(e){l.b.emit(r,l.i,e)},execCommand(e){l.b.emit(r,l.h,e)}})),[a])})(t,W,B,G,q,P),(0,i.useEffect)((()=>()=>{l.b.clear(W.editorId)}),[W.editorId]),n.j.jsx(Bt.Provider,{value:{editorId:W.editorId,tabWidth:u,theme:s,language:F,highlight:U,showCodeRowNumber:m,usedLanguageText:$,previewTheme:p,customIcon:e.customIcon||{}},children:n.j.jsxs("div",{id:W.editorId,className:(0,l.c)([a.p,r,"dark"===s&&"".concat(a.p,"-dark"),G.fullscreen||G.pageFullscreen?"".concat(a.p,"-fullscreen"):""]),style:e.style,children:[c.length>0&&n.j.jsx(Ye,{noPrettier:W.noPrettier,toolbars:c,toolbarsExclude:d,setting:G,updateSetting:q,tableShape:g,defToolbars:h,noUploadImg:W.noUploadImg,showToolbarName:e.showToolbarName}),n.j.jsx(Wt,{ref:P,modelValue:o,onChange:x,setting:G,mdHeadingId:C,onHtmlChanged:w,onGetCatalog:j,sanitize:k,noMermaid:W.noMermaid,noPrettier:W.noPrettier,noHighlight:W.noHighlight,placeholder:A,noKatex:W.noKatex,scrollAuto:z.scrollAuto,formatCopiedText:e.formatCopiedText,autoFocus:e.autoFocus,disabled:e.disabled,readOnly:e.readOnly,maxLength:e.maxLength,autoDetectCode:e.autoDetectCode,onBlur:e.onBlur,onFocus:e.onFocus,onInput:e.onInput,completions:e.completions,catalogVisible:B,theme:e.theme,noImgZoomIn:M,onDrop:e.onDrop,inputBoxWitdh:I,onInputBoxWitdhChange:e.onInputBoxWitdhChange,sanitizeMermaid:L,transformImgUrl:O,codeFoldable:R,autoFoldThreshold:H}),T.length>0&&n.j.jsx(Vt,{modelValue:o,footers:T,defFooters:S,scrollAuto:z.scrollAuto,onScrollAutoChange:V})]})})}))}}]);